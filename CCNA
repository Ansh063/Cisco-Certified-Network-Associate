

Cisco Certified Network Associate - Notes : 

-> IP is 32 bit Binary Number.
-> 1 Byte = 8 Binary Bits.
-> Router always check for network Section of IP address for routing packets.

-------------------------------------------------------------------------------------------------------------------------------

Address Classes : 
Class A, Class B, Class C = Unicast Traffic 
Class D = Multicast 
Class E = Reserved for future or Experimental Purpose	

Address class Range : 
Class A = 0.0.0.0 - 127.255.255.255
exception =  127 is reserved for loopback address 127.0.0.1 
	  =  0 Network is reserved for default network.
Actual Range of Class A = 1.0.0.0 - 126.255.255.255
 
Class B = 128.0.0.0 - 191.255.255.255 

Class C = 192.0.0.0 - 223.255.255.255

Class D = 224.0.0.0 - 239.255.255.255
-> 224.0.0.X = Link Local Multicast (OSPF)

Class E = 240.0.0.0 - 255.255.255.255
 
-------------------------------------------------------------------------------------------------------------------------------

# Direct Broadcast address : all the host bit set to 1 eg. 172.31.0.1/16 => 172.31.255.255 is the Direct Broadcast address

-------------------------------------------------------------------------------------------------------------------------------

# Local Braodcast Address : 255.255.255.255 : use in DHCP 
  Local Broadcast address is always Drop by ROUTERS. 

-------------------------------------------------------------------------------------------------------------------------------

# Local Loopback address IPv4 : 127.0.0.1  or 127.X.X.X is a loop back address 
			 IPv6 : ::1
  Router have loopback addresses which are not the same as the local loopback address  
  Router and Switches can also be configured with valid IP addresses on what's called a Loopback Interface. 
   
-------------------------------------------------------------------------------------------------------------------------------

# IPv4 Link-Local Address : Allow two computer to communicate when there are no DHCP servers available. : 169.254.0.0/16 
  This address range is non routable. 

-------------------------------------------------------------------------------------------------------------------------------

# Private Ip Address : non routeable on the internet.  
## IPv4 Private Ip range : 
--------------------------

RFC1918 name	IP address range	        Largest CIDR block          Host ID size  Mask bits        Class

24-bit block	10.0.0.0 – 10.255.255.255	10.0.0.0/8 (255.0.0.0)	      24 bits	   8 bits	single class A network
20-bit block	172.16.0.0 – 172.31.255.255     172.16.0.0/12 (255.240.0.0)   20 bits      12 bits	16 contiguous class B networks
16-bit block	192.168.0.0 – 192.168.255.255	192.168.0.0/16 (255.255.0.0)  16 bits	   16 bits	256 contiguous class C networks

## IPv6 Private Ip : 
--------------------
In IPv6 there is a special "Unique Unicast" IP range of fc00::/7

-------------------------------------------------------------------------------------------------------------------------------

## Subnet Mask : used to determine host and network portion. 
   
-------------------------------------------------------------------------------------------------------------------------------

## Discontinuous Network Mask : Cisco Does not support Discontiguous mask 

-------------------------------------------------------------------------------------------------------------------------------

## IP Subnetting : 
	Subnetting Part 1 : 	
		-> Method1 = Binary Method 
		-> Method2 = Quick Method 
	IP address : 1. Subnet Address 
		     2. 1st Host Address 
		     3. Last Host Address 
		     4. Broadcast Address 
Binary Method :
	Network/Subnet Address : 	
		- Fill the host portion of an address with binary 0's
	Boradcast address : 
		- Fill the host portion of an address with Binary 1's
	First Host : 
		- Fill the host portion of an address with binary 0's except the last bit which set to 1
	Last Host : 
		- Fill the host portion of an address with Binary 1's except the last bit which set to 0  		
				
Quick  Method : 
	Shortcut Table : 128   68   32   16   8    4    2    1 
			 128   192  224  240  248  252  254  255
       	
	first host = Subnet + 1
	172.16.32.0 + 1 = 172.16.32.1
	Last Host = Boradcast - 1
	172.16.47.255 - 1 = 172.16.47.254	
	Broadcast address = Next Network Address - 1
	172.16.48.0 - 1 = 172.16.47.255
	  
PART 2 - IMPORTANT : 

-> How to Sub-Divide a network/subnet when given: 
	- Specific Number of Host required - Subdivide a Specific network/subnet that you where given into multiple subnets  	
	- Specific number of Subnets - Multiple Subnets 
	
To find how many host supported on an subnet is = 2^n - 2
	for example suppose a subnet is given as /24 this means that host has 8 bits = 2^8 - 2
	


Block Size : Mask Least Significant Bit 
Wildcard = Block Size - 1
 

Subnetting : 
it Involves : Stealing or taking away bits from the host portion of an address.  
	      Allocating the stolen bit to the network portion of a new address. 
	
Two Important rules : 
	When ask for the number of hosts = HOSTS =         2^n - 2
		Note : Count Host bits from right to left 
	When ask for number of networks = NETWORKS =        2^n 
		Note : Count Network bit from left to right 
	
Shortcut table : 	
		2^1  = 2
		2^2  = 4
		2^3  = 8
		2^4  = 16
		2^5  = 32
		2^6  = 64
		2^7  = 128	
		2^8  = 256
		2^9  = 512
		2^10 = 1024
	
After moving the bits to network portion we have :
Step 6 : We have to workout on various subnet 
	 to work on the subnet go through the various binary combinations for the subnet portion of the address : 
Network 		SUBNET		HOST 		Single Octet

1st network= 10.1.1.     0000	        0000		10.1.1.0/28 
2nd network= 10.1.1.	 0001 		0000		10.1.1.16/28
3rd network= 10.1.1.	 0010		0000		10.1.1.32/28
.
.
.
Last networ= 10.1.1.	1111		0000		10.1.1.240/28

To find subnet = 2^n = 2^4 = 16
To find host = 2^n -2  = 16-2 = 14

-------------------------------------------------------------------------------------------------------------------------------

VLSM ( Variable Length Subnet mask )

-> First find how many subnet is required and how many host are required ?? 
-> Figure out the network which required maximum number of hosts. 
-> /30 support only 2 address suitable for WAN 

Advantages of VLSM : 

More Efficient use of IP address 
Fewer updates 
HIde Topology Changes 
Hierarchical Level for better route summarization 

Classful Routing : 

-> Classful Routing protocols do NOT include the subnet mask with the network in routing advertisements.
-> within the same network, consistency of the subnet mask is assumed (same subnet mask for entire network).
-> summary routes are exchanged when crossing a classful routing.  
Example : 
	1. RIPv1
	2. IGRP 

Classless Routing : 

-> Classless Routing Protocols DO include the subnet mask with the network in routing advertisement
-> Support VLSM 
-> Summary Routes can be manually configured  
NOTE : EIGRP and RIPv2 act as a classfull by DEFAULT.  
	-> these two protocols are classless protocols but by default they behave like a Classless protocol.
	-> use the "no auto-summary" command to change the default behaviour. 

Examples : 
	1. RIPv2
	2. EIGRP 
	3. OSPF
	4. ISIS

Automatic Summaization : 

	1. RIPv2
	2. EIGRP
	3. RIPv1
	4. IGRP
occurs across classful boundaries 
	-> A / B / C
-------------------------------------------------------------------------------------------------------------------------------

Types of Communication : 
	
1. Unicast   - One to One. 
2. Broadcast - One to All, Broadcast to local subnet means all the device in subnet receive the packet. 
3. Multicast - One to Some Those device will get the packet who subscribe for the sevice.   

-------------------------------------------------------------------------------------------------------------------------------

Cables : 
Baseband : Only allows Single signal 
Broadband: Allows multiple signals 

-> Terminator is used in Coaxial cable to stop signal Bouncing back. 
-> Cable Length : the longer the cable greater Signal degradation. 
-> Cable Breaks : This will stop the complete functionality. 
-> Single Collision Domain : If a collisio takes place at any point on the network all device on the network are affected by that collision and would need to back off. 
-> Single Broadcast Domain : In other words if a device A sends a broadcast message everyone in the network would receive that broadcast and would need to process he broadcast. 

Unshielded Twisted Pair(UTP) : 
Straight through Cable : PC <-> Switch, PC <-> Hub, PC <-> Bridge, Router <-> Switch 
Cross Over Cable : allows us to connect two device of same type : router <-> router, Switch <-> Switch, Hub <-> Hub, PC <-> PC

-------------------------------------------------------------------------------------------------------------------------------

Auto MDIX : Medium Dependent interface Crossover
	    Normally Routers and PCs use MDI
	    Normally switches and Hub uses MDIX. 
	    Auto MDI/MDIX allows for automatic switching once a cable is connected 
	    Auto detect cable type (crossover/straightthroug) 
   
MDI(Media Independent Interface) is an Ethernet Port connections typically use on network interface card or NICs of PCs 
MDI is also use ny the routers and can be used on uplink ports on ethernet switches. 

Direct Attachment cable (DAC) : uses copeer twinax and has SFP at its each end 
				SFP (Small FormFactor Pluggable) - hot pluggable transreceiver 
				
Roll Over cable : Used to connect to the consoles of netwoking devices. it allow you to connect from the serial port on your PC or laptop to the consol port of the switch or router. 
 
-------------------------------------------------------------------------------------------------------------------------------

MAC Address : 
  24 bits of OUI 
  0 : Unicast 
  1 : Multicast 

CSMA/CD : Carrier Sense Multiple access / Collision detection 
This operates as follows when a device want to send traffic it should first check to hear if any other device is speaking so the device will not communicate onto the network if it hears another device. : Carrier Sense. 
Multiple access means that any device can communicate across the segment as long as no other device is communicating. 
When a device detect that a collision has taken place it may send a "Backoff / JAM " signal to indicate that the collision has taken place.
CSMA/CD works in LAN & CSMA/CA works in Wireless LANS 

-------------------------------------------------------------------------------------------------------------------------------
Devices  : 

1. HUB : Layer 1 Device (Physical layer Device) 
	 Multi Port repeater 
	 used in star topology
	 It will simply amplifies the signal and send the traffic or frames out of all ports. 
 	 As you increases the number of devices in a hub environment the number of collision increases and your network throughput goes down
	 		
2. Bridge : layer 2 Device (Data Link Layer)
	    Has a Mac address table 
	    Star Topology 
	    CAM Table - Content Addressable Memory  
	    
  -> Switches and Bridges operates in a very similar way , but bridges do the processing on the software where as the switch do the processing on hardware. 
  -> Switches uses Something called an ASIC (Application Specific Integrated Circuit) Which allow for high throughput, very quick table lookup and forwarding the traffic.Switches don't slow the traffic down.  
  -> Bridges are lot slower than switches rest all are same as switch 
  -> Each port on a bridge is a seperate collision Domain and single broadcast domain. 

3. Switch : ASICS (Application Specific integrated Cicuits) 

4. Router : layer 3 device 
  -> Layer 2 information is rewritten, the layer 3 informaation is left the same but every time traffic hops across the router or is sent from 1 VLAN to another VLAN the layer 2 information is rewritten in the frame when the traffic is received by the hub, it will flood it out of all ports. 
  
	 
-------------------------------------------------------------------------------------------------------------------------------

Collision and Broadcast Domain : 
	
-> Hub is a Single boradcast domain as well as single Collision Domain 
-> Collision never happens between two devices, which are connected to different ports of a Switch.
-> Switches will break in the collision domain. 
-> Switches will never break in the broadcast domain.
-> In, collision domain, every port on a router are in the separate broadcast domains.
-> each port on a hub is in the same collision domain. Each port on a bridge, a switch or router is in a seperate collision domain.

-------------------------------------------------------------------------------------------------------------------------------

Speed and Duplex Settings : 
	
- Auto negotiation on both the side or 
- Hard coded on both the side.
 
-------------------------------------------------------------------------------------------------------------------------------

Loopback address : 

A loopback interface is the logical interface on a router and you can create many of these.
/32 ip address . this is the only ip address on that interface, it won't go down unless you manually shut the interface down.

Advanteages of loopback address : 
- interface doesn't go down unless you explicitly shut it down.
- you can use the loopback interface for diagnostics and troubleshooting purposes 	  
- Routing protocols such as OSPF use the loop back address to determine the router ID in the OSPF network. 

-------------------------------------------------------------------------------------------------------------------------------

Socket : Combination of IP address of a host and a port number and the transport protocol used. 
Session Multiplexing : Single host with single ip address is able to communicate with multiple server. 
		       Connection must first established between sender and reciever.
		       ex. one brower with many tabs like google,yahoo,gmail.
TCP / UDP : 
	
	Segmentation : 
		- MTU (Maximum Transmission Unit) depends on Physical medium 
 		ex. MTU of fastethernet is 1500 bytes 
		- Maximum Segment Size is the largest amount of data 
		- TCP supports MSS and path MTU discovery 
			- sender and receiver can automatically determine maximum transmission
	Flow Control : 
		- if the sender send the data faster than the receiver can handle , receiver drop data and require retransmission. 
		- TCP use a sliding window to control flow of data 
		- UDP does not involve flow control 
	
	Connection Oriented : 
		- TCP is connection oriented 
	
	Reliability : 
		- every segment tranmitted is acknowledge 

TCP : 
	- Transport Layer protocol 
	- access to the network layer to the application 
	- connection oriented 
	- full duplex mode operation 	
	- error checking - Checksum 
	- sequencing of data packet 
	- Acknowledgement of receipt 
	- data recovery feature
	
TCP Header : 
	16 bit source port number 
	16 bit destination port number 
	32 bit sequence number 
	32 bit acknowledgement number 
	flags 
		- Congestion Window Reduced (CWR)
		- Echo Congestion Notification Echo field or flag 
		- Urgent (URG)
		- ACKNOWLEDGEMENT 
		- PSH is the flag set by the TCP header to cause the TCP receiver to immediate pass that segments data to the receiver application socket 
		- Reset 
		- synchronize 
		- Finish
	Window size 
	16 bit TCP Checksum 
	16 bit urgent pointer 
	options 
	data 
		
-------------------------------------------------------------------------------------------------------------------------------

Port Number : 

Well known port number 0 to 1023. 
Registered port number 1024 to 49151.
dynamic or Private ports 49152 to 65535.
DNS use UDP on port 53 to serve request, TCP is used when response data exceeds 512 bytes for task such as Zone Transfer 
Zone Transfer : Zone Transfer is used for replication of databases containing DNS data across a set of DNS server. 

Ephemeral Port Numbers : 
short lived port used for client side connection 
temporary only last for the duration of the session 
IANA suggest 49151 to 65535

-------------------------------------------------------------------------------------------------------------------------------

Flow Control : 

TCP : 
	rather than using a fixed window size it uses a sliding windows, it start with small window size and increses exponentially

Window Size : 
	Window granted to sender 
	congestion window (CWND) : The Congestion Window or CWND is initially set to very low value and then increases at exponential rate 
	for every lost segment the congestion window is set half after the lost packet is resent then the congestion window start increasing 
	exponentially.
	it then slows down its growth , using an algorithm called congestion avoidance 

In quality of Service Weighted random Early detetction or WRED can be used to increase efficiency of TCP transmission. 
 	
-------------------------------------------------------------------------------------------------------------------------------

VLANs : Virtual LANs  

1. VLAN Overview 
2. 802.1Q and ISL 
3. VTP

Vlan is essentially a Single broadcast Domain or logical subnet or logical network or we can say that it's a group of hosts witha common set of requirements attached to the same boradcast Domain regardless of where they are present physically. 
Able to group device logically not physically. 

Vlan Advantages : 
	
1. Segmentation : Seperate user based on their function. 
2. Flexibility : 
3. Security : it also provide security because users are on seperate VLANs and they have to traverse a layer 3 device like a router from one vlan to another on the router you can also implement Access list to filter the traffic. 
The Only way to move from one VLAN to another VLAN is to go via layer 3 device such as router. 

Trunk Port : 
A special type of link is required between the two switches so that they can communicate any information between them and that is known as trunk port. 

Trunking : 
Allows Multiple VLANs to traverse link.
Interface will have to run a trunking protocol to excahnge any type of information. 
The Two trunking protocol that are used are 
	1; ISL : Inter Switch Link 
	2: 802.1Q 
ISL is a Cisco proriatory protocol 
802.1Q is used for communicating VLAN information between switches across trunking port. 

802.1Q  : 
802.1Q one frame has a full byte tag inserted into the header between the source address field and the length field because the frame is being altered the FCS field is recomputed and replace in the modified frame. 

VLAN number can be from 0 - 4096

The tag consist of two main part : 	
	- TPID : The tag protocol identifier 
	- PRI : priority
	- CFI : Canonical Format identifier used in old days in ethernet in token ring network 
	- VLAN ID : 12 Bit field specifying the VLAN ID  

Native VLAN : 
Native Vlan is untagged when a port on a switch is setup as a trunk. frame belonging to the native vlan do not carry violent tags when sent over this trunk by the same point if an untagged frame were received on the trunk port the fram would automatically 
	 		  	
Management Traffic : 
	- Always use Native VLANs
		- STP BPDU 
		- DTP : Dynamic trunking protocol is a way that switches negotiate to set up a trunk between themselves automatically. 
	- Always use VLAN 1 , tagged it native VLAN not VLAN 1 
		- CDP : It allow us to view directly Connected Device and Trunking protocol 
		- VTP : It is a way to dynamically update other switches with changes made on a single switch in a VTB Domain. 
		- PAgP : or port aggregation is a protocol used for the automatic creation of ether channels.
		- UDLD : Uni Directional link detection is used to monitor the physical configuration of cables between devices and detect unique directional links. This allows us to detect incorrectly cabled links. 

Port Assignment : 

- Static VLANs : Administrator can directly put that interface into VLAN 
- Dynamic VLANS : using VMPS (Vlan membership policy server) 
		  Dynamic VLANS allow for the port deal and to be dynamicaly updated based on the mac address of the device. 
		   
VTP (Vlan Trunking Protocol) : It is a Cisco propriatory layer 2 protocol which allow for the propagation of the vlan information from one switch to another rather than telnetting to multiple switches . 		
- Allows for propagation of VLAN information 
	- Additional, Deletion and renaming of VLANS
- Propagated across the trunk links.
- Uses MAC Address : 01-00-0C-CC-CC-CC Which is the well known multicast address for flooding of the CDP and DTP protocols : 
There are three types of message in VTP : 
	- Summary Advertisements : Advertisement occur when there is any changes occur.  
	- Subset Adver. : multicast advertisement. 
	- Advertisement Requests : request the changes that occurs  

VTP Messages: 
	- Summary Advertisements 
		- Every 5 minutes
		- Or, Whenever there is a Change 
		- Inform other switches of the current VTP Domain and Configuration revision number 
	- Summary Request : 
		- Switch has been reset 
		- VTP Domain name has been change 
		- Switch has received a VTP Summary advertisement with a higher configuration revision than its own. 
	- Subset Advertisement : 
		- Contains the list of VLAN information 
		- if there are several VLANS, More than one subset advertisement may be required 

VTP Modes : 
	- Server (Default Mode) 
		- create VLANS 
		- Modify VLANS
		- Delete VLANS 
		- Send and Forward Advertisement 
		- Synchronizes databases 
	
	- Client 
		- cannot create, change, or delete VLANs 
		- sends and forward advertisements 
		- synchronizes Databases 
	    
Access Mode : An access port is a connection on a switch that transmits data to and from a specific VLAN. Because an access port is only assigned to a single VLAN, it sends and receives frames that aren’t tagged and only have the access VLAN value.

Trunk Mode : Unlike an access port, a trunk port can transmit data from multiple VLANs. If you have a dozen VLANs on a particular switch, you don’t need additional cables or switches for each VLAN—just that single link. A trunk port allows you to send all those signals for each switch or router across a single trunk link.

-------------------------------------------------------------------------------------------------------------------------------

Inter-VLANs : Whenever hosts in one VLAN need to communicate with hosts in another VLAN, the traffic must be routed between them. This is known as inter-VLAN routing

-------------------------------------------------------------------------------------------------------------------------------

Dynamic Trunking Protocol : 
	This allows switched to dynamically negotiate to forming of trunks. 
	Cisco Propritary protocol 
	use mannual configuration instead of using DTP 
	It supports two mode : 
		- Dynamic Auto 
		- Dynamic Desirable 
	Desirable means that the switch initiates the trunking with the remote end. 
	Auto means that is doesn't negotiate but if the other side initiates the trunking, trunking will be formaed 
	
	auto auto  = access mode
	auto desir = trunk 
	desir auto = trunk 
	desir desir= trunk 

DTP packets are sent using 
	ISL : when VLAN 1 is used 
	802.1Q :DTP packets are sent over Native vlan. 

-------------------------------------------------------------------------------------------------------------------------------

Spanning Tree Protocols : 

Spanning tree develop to stop layer 2 loop occurring in switch environment. 
redundant links introduce loops. and Spanning tree is used stop those loops 
spanning tree or (802.1D Spanning tree) 

Rapid Spanning Tree : 
Multiple Spanning Tree : 



Different Types of Spanning Tree : 
1. IEEE 802.1D (original) : The Legacy standard of Spanning Tree
		  - CST : Assumes that there is one spanning tree instance for the entire bridged network.     	 
2. PVST (Per Vlan Spanning Tree) : Only Supported ISL 
   PVST+ : Support ISL and 802.1Q 
	   Cisco Enhancement of spanning tree that provide a separate 802.1D Spanning Tree Instance. 
3. Multiple Spanning Tree Protocol (MSTP) or 802.1S  ; Optimize PVST by mapping multiple VLANs to the same spanning tree instance 
4. Rapid Spanning Tree protocol (RSTP) or 802.1W : It converges very quickly by adding roles to ports and Enhancing BPDU exchanges. Only supports a single instance of spanning tree 

5. Rapid PVST+ : One Spanning tree instance per VLAN but have rapid convergence.    
	   		 
-------------------------------------------------------------------------------------------------------------------------------

How Do Switch learn about each other ?? 
BPDU (Bridge Protocol data unit) are sent out of all ports on switch on default every 2 seconds 
If a switch get BPDU again and again it knows that the loop is formed. It receives the BPDU from the same switch on multiple ports 
  
BPDU : 
	It contains : 
	Bridge ID : a Spanning tree bridge ID is an 8 Byte unique value to the switch it Consist of 2 Byte Priority Field and the 6 Byte system ID (based on the MAC Address) 
		    Consist of Priority of 32768 by default. 
		    
BPDU : 
- Contains Information about spanning Tree 
- Unique MAC Address 
- MAC ( 1:80:C2:00:00:00 or 01:00:0C:CC:CC:CD for VLAN Spanning Tree )

Types of BPDU : 

1 : Configuration BPDU : 
	- Used by Spanning Tree to Provide information to switch
2 : Topology Change BPDU : 
	- To tell switch of a change 
3 : Acknowledgement BPDU : 
	- use to confirm the receipt of a topology change in a notification. 

BPDU is send in every 2 Seconds. 


Root Bridge : The Switch having the Lowest Root ID
Root Port (Role) : This is the port whose distance from root bridge is minimum. 
Designated Port : Port which send traffic away from the root bridge.Root Bridge have all the port as designated port.  
Broadcast Storm : when there is loop in a topology. 

between two switches some port are in forwarding state(Designated) and some are in Blocking State. To determine the which switch port perform which role this will decide on : 
	lowest cost to the Bridge Switch 
	and if the cost is same then the next condition is the lowest bridge id.

we cannot have to designated port on same segment  
   
Cost of gigabit links in spanning tree is 4 
Bridge ID consists of { Priority + VLAN + BASE MAC_ADDR }

Case : 
if switch is connect twice with the root bridge then we acoording to us a switch have 2 root port but this is not possible then the root port will be the root Bridge's lowest port id. 

PVST + Extended Bridge ID : 

When configuring multiple VLANs and running per VLAN Spanning Tree 
	- Different MAC address would have to be allocated for every VLAN 
PVST : 
	- Creates a instance on a per vlan basis.
	- The vendor would need to assign a unique mac address on a per vlan basis
	- Few VLANs
This is not scalable as we have to assign 4094 MAC addresses 

So to conserve MAC Address the system has changed and an extended system id is also known as MAC address. 
this technique is also know as MAC Address Reduction. 
so with the extended bridge ID , the bridge ID is still 8 bytes in size but the priority is now split into two parts : 
	two byte priority portion consist of a 4 bit bridge priority and a 12 bit extended system id. the mac address are still in 6 bytes. 

Bridge ID : Bridge Priority (4 Bits)
	    Extended System ID (12 Bits)
	    MAC Address (48 Bit or 6 Byte) 
-------------------------------------------------------------------------------------------------------------------------------
PortFast : 

This will skip the Listening and Learning state of switch. 
spanning-tree portfast default : this command enable portfast on the access port in the network.
Cisco used the term : Port Fast 
Other Vendor used the term : edge port

Port Fast on Acces ports: 
	you shouldn't enable port fast on link between switches(Trunk Ports )
		- Because this will introduce loops in your topology. 
portfast : immediate transition to the forwarding state so, it bypass the listening and learning state. 
		- It goes directly from blocking to the forwarding state. 

quicker convergence : 
	Rather than waiting for spanning tree o go through various stages : Blocking 
									    Listening 
									    Learning 
									    Forwarding 
	Spanning tree still running on that port but transition immediately to the forwarding state. 
-------------------------------------------------------------------------------------------------------------------------------

Rapid Spanning Tree : 802.1w : For Convergenge with single bridge Root.
			       RSTP is not a timer based spanning tree protocol.  
Rapid Per Vlan Spanning Tree : Fast Convergence with individual bridge root on different vlans.
Multiple Spanning tree : 802.1s : It gives you ability to associate multiple VLANs to a Spanning Tree root.

        LearningThere are two types of link : 
	Shared (shr) : Half Duplex
	point to point (p2p) : Full Duplex
Edge : this means that the portfast is enabled on the port. 
	
RSTP and RPVST+ uses different destination MAC addresses: RSTP with multicast address : 0180.C200.0000 (Defined by IEEE std.)
RPVST+ with multicast address : 0100.0CCC.CCCD (Chosen by Cisco).

------------------------------------------------------------------------------------------------------------------------------e
Port States : 

	802.1D 		802.1W  	Cisco PVST+	Cisco Rapid PVST 

	Disabled 	Discarding 		
	Blocking 	Discarding	BLK		BLK
	Listening 	Discarding	LIS		BLK 
	Learning	Learning	LRN		LRN
	Forwarding 	Forwarding 	FWD		FWD

Spanning Tree Port Roles  :

	802.1D		802.1W		Cisco PVST 	Cisco Rapid PVST 

	Root		Root		Root		Root
	Designated	Designated 	Desg		Desg
			Alternate	Altn		Altn
			Backup 		Back		Back

------------------------------------------------------------------------------------------------------------------------------e

Port Roles : 

1. Root Switch
2. Root Port (1 Per Switch)
3. Designated Port (1 Per Segment)

The Root Port and the Designated Port Remain the Same. The Blocked port role is now split into the backup and alternate port role.
the STA determines the role of a port based on an examination of the Bridge Protocol Data unit (BPDUs) to decide whether one is 
more useful than the other. The decision is based on the value stored in the bPDU to decide whether one is more useful than the 
other. 


Root Port : This is the port closest to the root bridge in terms of path cost. 
Designated Port : This is the best port on a segment o use to get to the root bridge.
Blocked Port : A block port is defined as any port that is not the designated or root port. A root port remina blocked as it receives the more usefull BPDU in order to stay blocked.

Alternate Port : An Alternate port is port that is blocked because it is receiving more useful BPDU's from another bridge. 
Backup Port : 
  
Alternate port—Acts as the backup port for a root port. When the root port is blocked, the alternate port takes over. 
Backup port—Acts as the backup port of a designated port.

-------------------------------------------------------------------------------------------------------------------------------

STP Load Balancing : 

All the traffic is being pass to the root bridge whether it is VLAN 10 or VLAN 20 So this will increase the loat on one switch because all other path is being blocked by the STP. 

So we can divide the traffic by using VLAN i.e VLAN 10 traffic is pass via path1 and VALN 20 traffic is pass via path2

like vlan 20 has another root bridge and vlan 10 has another root bridge.

-------------------------------------------------------------------------------------------------------------------------------

BPDU Guard : 
It is a multiple security Mechanism available in spanning tree.this will disable the port.
This is useful on ports that are going to be used as access port and should never be connected to another switch. 

Two ways to configure BPDU Guard : 
	- Per Interface Basis
		- spanning-tree portfast
		- spanning-tree bpdu guard enabled

	- Configure it Globally on the switch. 
 		command : spanning-tree portfast default 
Note : By default, BPDU guard is disabled when you configure BPDU guard on interface that port doesn't have to be configured as 
       portfast port. If any bpdu is received on that port it will be error disabled. 	


-------------------------------------------------------------------------------------------------------------------------------

Cisco Discovery Protocol : 

Cisco Discovery Protocol (CDP) and the Industry standard version Link Layer Discovery Protocol 
these are the protocols that runs on layer 2 in the OSI Model and allows you to discover how device are connected each other. 
This runs independently of protocols such as IPv4, IPv6.
CDP is Cisco Proprietory this will only discover other Cisco Devices. 
CDP uses multicast frames ..... but doesn't rely on high level protocols. 
CDP only shows you directly connected device. 

-------------------------------------------------------------------------------------------------------------------------------

Ethernet Channel : 

EtherChannel is a port link aggregation technology or port-channel architecture used primarily on Cisco switches. It allows grouping of several physical Ethernet links to create one logical Ethernet link for the purpose of providing fault-tolerance and high-speed links between switches, routers and servers.

Dynamic EtherChannels : 

Cisco Proprietary Port Aggregation Protocol (PAgP) 
IEEE standard Link Aggregation Control Protocol (LACP)

LACP support Maximum of 16 channels 
PAgP support 8 

Desirable and auto : PAgP 
Active and Pasive : LACP 

The switch either use PAgP or LACP (if already in use) or use Cisco Discovery Protocol (CDP) if using manual configuration. When Checking neighbour, all settings except the STP setting must match. 

Etherchannel Load Distribution Channel   

------------------------------------------------------------------------------------------------------------------------------e

Cisco IOS and DNS : 

commands in cmd

1. C:\Windows\System32> ipconfig /displaydns : this command will display the cached dns information. 
2. C:\windows\System32> ipconfig /flushdns : This command will flush all the entries in the dns. 
3. C:\Windows\System32> ipconfig /? : This will display the help menu. 
4. traceroute -d [ip_address] : -d is used for don't bother
5. cisco command : this command stops lagging when we enter any rubbish eg. iusiufsdiuf
	Core1(config) # no ip domain lookup
	Stops Boradcast for DNS lookup 
6. cisco command: Configure the DNS ip 
	ip name-server [dns_server_ip]  
7. cisco command : display all cache information about hosts 
	show hosts 
8. Cisco command : clear all cache information about hosts 
	clear host * 

------------------------------------------------------------------------------------------------------------------------------e

Dynamic Arp Inspection ( DAI ) : 

DAI is used when there is ARP Spoofing Attack. 
Dynamic Arp inspection stops attack ARP Poisoning and Man-in-the-middle Attacks. 

command: 
****************************************
-> ip arp inspection vlan [vlan_id] 
-> show ip arp inspection vlan {vlan_id}
****************************************

How would the switch know that this is the correct mac address attached to this IP address ?? 
Ans : Using DHCP snooping. It listenes for DHCP messages and it will dynamically build a table having a IP address and the Layer 2 Address. 
and for the device that is not a DHCP client we have to manually map the addresses. 
So the Switch will allow our clients to request IP address but not allow any untrusted port to offer ip address to the client 
Implementing DHCP snooping : 

	-> show ip dhcp snooping binding 
Note : When the device is not in the binding table first we need to make that port as a trusted port then we apply DAI. 
	-> ip arp inspection trust
	-> ip arp inspection vlan {vlan_id}

Configuring DHCP snooping : 
******************************************
switch(config)# ip dhcp snooping 
switch(config)# ip dhcp snooping vlan 1 
switch(config)# show ip dhcp snooping 
Now we have to make a port trusted which is destinated to dhcp server
Switch(config)# interface <trusted_interface_name>
Swicth(config-if)# ip dhcp snooping trust 
******************************************* 
 
configuring rate limiting to the interface from where the the DHCP discover packets are flooding in the network 

*******************************************
switch(config-if)# ip dhcp snooping limit rate <1 - 2048>
 
------------------------------------------------------------------------------------------------------------------------------

Routing information : 

1. Routed vs Routing Protocol 
2. Static vs Dynamic Protocol 
3. DIstance vector Routing protocol 
4. Link state routing protocol. 

# Routed vc Routing Protocol : 

Routed : 
-> Routed protocol carries user data. ex IPv4, IPv6
-> Each Router making a independent decision in determining path 
-> routed protocols are independent on one another.

Routing Protocols : 
-> EIGRP, OSPF, RIP, ISIS, BGP etc
-> Communicate Information about networks
-> Determine the best route between networks.
ex. 
RIP uses HOP COUNT
OSPF uses BANDWIDTH 
EIGRP uses BANDWITH and DELAY to determine the best path. 
-> Routing Protocols are used to automatically advertise the networks between routers.

There are two main ways that we can add routes to the routing tables: 
1. Static 
2. Dynamic 

Static Routes : 
-> Administrator manually enters the route - no overhead on network 
-> Manually update route require when a topology change 
-> Default gateway is the static route ..... when a router don't have path to forward a packet the router forward that packet to default dateway.
-> ip route 0.0.0.0 0.0.0.0 192.168.0.1 : configuring default route.

Dynamic Routes : 
-> Uses a Routing Protocols 
-> Automatically adjusts based on topology changes or traffic changes. 
-> exchange network information with each other.
-> learn and maintain routes by exchanging routing updates. 

Note : Generally today we are going to use either OSPF or EIGRP in most enterprise network.

EIGRP : It is a popular routing protocol when we have only cisco devices only. EIGRP is a CIsCO prorietary Cisco routing protocol. 
OSPF is a industry standard routing protocol. and is good to use when you have multi vendor devices.
  
Some Important Terms : 

1. Autonomous System (AS) : It is a grouping of networks under a single administrative domain 
2. Interior gateway Protocol (IGP) : Used within a Autonomous system ex. RIP, OSPF, EIGRP. 
3. Exterior Gateway protocol (EGP) : Used between two autonomous systems. ex. BGP (Border gateway Protocol)

# Autonomous System Number : 

-> with in an AS no need to register or apply for a Autonomous System Number. 
-> when communicating to the internet we have to register or apply for a Autonomous System Number. 

------------------------------------------------------------------------------------------------------------------------------

# Types of Routing Protocols : 

1. Distance Vector : 
	-> Also known as Routing by rumor. 
	-> Determine the direction and distance to the destination. 
	-> the direction is also known as vector and the distance such as hop count is determined to any destination in the 
	   network. 
	-> Router advertises routes as a vector of distance and direction 
		- Direction : next hop address 
		- Distance : uses a metric such as hop count 
	-> very Limited visibility ( Disadvantage )
	-> uses bellman-ford algorithm 

2. Link State Routing Protocol : 
	-> have a complete map of area ( Visibility )  
	-> Can make a much more informed decision about how to get to the destination network.
	-> Each Router Originate information about itself, its directly connected links and the state of those links. 
	-> Uses an algorithm Shortest Path First. 
	-> example OSPF, IS-IS
	-> Difficult to Configure ( Disadvantages )
	-> Require More Enery and Power.
	
	-> Floods the network with Link State Advertisement(LSA), Thus information about the entire network is received by the 
	   all the routers in that network and area. 
	-> Populate a Topological Database : which is the database that's the same on all the routers within an area. 

OSPF Hierarchy : Link state routing protocol such as OSPF allow for the division of large autonomous system into smaller 
		 grouping called areas. 
Internal Router : Router which are only part of single area. 
Autonomous system border router : As it connects two area 
Backbone area : this is the area which is connected to all the area. information from one area has to traverse to another area 
		from the Backbone area. 

Benefits of Link state routing protocol : 
	-> fast convergence
		-> changes reported immediately
	-> Robustness against routing loops
		-> Router Know topology 
		-> link state packets are sequenced and acknowledged 
	-> Hirarchical Design enables optimization of resources. 
	-> can scale to much larger environments than distance vector routing protocol. 

Drawbacks of Link state Routing protocol : 
	-> Significanet Demand of Resources 
		-> Memory - LSDB (Link State Database), forwarding table.  
		-> CPU 
	-> Requires strict design
	-> Configuration and design is more complex  
  	

3. Advanced Distance Vector : 
	
Enhanced Interior Gateway Routing Protocol (EIGRP) : Takes the best of both link state routing protocol and Distance vector protocol. 
also known as the Hybrid routing protocol. 
Cisco Proprietary.


Administrative Distance : 

	-> Believability factor of a route. 
	-> who will you believe ? ex. if OSPF says go left and EIGRP says go right where will the packet go ?? 
	-> Administrative distance is then used as a tie breaker to determine which way to go 
	-> Routing protocol with the lowest administative distance is more acceptable, and this info is added to RIB 
	
Administrative distance table : 
	connected interface 	0 	Lowest administrative distance means highest believability factor range (0-255)

	Static Route 		1 
	BGP 			20
	EBGP 			20
	IBGP 			200	
	Internal EIGRP 		90
	OSPF 			110
	RIP			120
	Unknown 		255

RIB Failure : rib failure from "show ip bgp" indicate that a route is learned from a neighbour where a lower administrative 
distance has already been installed into the routing table, thus the BGP route is Failed to install into the IP Table(RIB) 
because it has been trumped by a lower admin.   

------------------------------------------------------------------------------------------------------------------------------

Switch Virtual Interfaces (SVIs) :

which is a logical layer 3 interface on a cisco router that has a switch module in it. 
switch(config) # int vlan 10 
this is the Switch virtual interface 

------------------------------------------------------------------------------------------------------------------------------

Inter-VLAN Routing using a Multi layer switch : 

Multi layer switch it has the ability to route between two different networks it has layer 3 interfaces like gig 1/2 and 1/2
Interface like VLAN00010 and VLAN00020 are called as Switch Virtual Interface. 
Logical Layer 3 Interfaces is also called as Switch Virual Interfaces.  
 
------------------------------------------------------------------------------------------------------------------------------

Router on a stick : 

Router on a stick or external router that's connected to allow you to switch that perform the inter VLAN routing to allow device
in one VLAN to communicate with device in another VLAN. 
if a one VLAN want to talk to another VLAN then it need to router who can route these packets. 
Why there is need of virual interfaces ?? 
Suppose that we have 100 vlans for routing we need 100 physical port which is not possible for router so that's why we use single
physical port and divide that port into virtual interfaces.

int gig 0/1.10
encapsulation dot1q [vlan_id]
ip address [ip_address] [subnetmask]

------------------------------------------------------------------------------------------------------------------------------

Classful vs Classless Routing Protocol : 

# Classful Routing Protocol : 
	-> Do not Advertise the Subnet mask.
	-> They would advertise network 
	-> They assume that everyone is using the same subnet mask  
	-> Summarize route across classful boundaries.
	-> ex. RIP version1 and IGRP

# Classless Routing Protocol : 
	-> Do advertise subnet mask. 
	-> It also supports VLSM (Variable Lenth Subnet mask)

NOTE : Longest Prefix match take precidence over Administrative Distance.

------------------------------------------------------------------------------------------------------------------------------

Routing tables : 

- Is a list of networks that the router knows about 
- information about how to reach those network. 

Directly connected networks 
	- Added to the routing tables automatically
	- Directly connected to one of the interfaces to the local router.  

Static Routes : 
	- Manually added to the configuration of the router. 
	- very good for small simple network. 
	- Do not dynamically adjust to changes in  network topology.
	command : 
	ip route <destination_ip> <subnet_mask> <next_hop_ip_address> 

Default route : 
	- Optional Route : That is used when no explicit path to a destination is found in the routing table. 
	command : 
	ip route 0.0.0.0 0.0.0.0 <next_hop_ip_address>

# Default Gateways vs Default Route : 

Default Route is Indicated by 0.0.0.0 
The default route is the destination that a packet is sent to if the router doesn't have instructions to send it somewhere else.The default-route is used on routers, while the default gateway is used on hosts. As an example, consider a simple home router that connects your home network to the Internet

Note : If you have IP route enabled you don't use the default-gateway command. 
command : no ip routing 

------------------------------------------------------------------------------------------------------------------------------

Network Time Protocol (NTP) : 

NTP is used for synchronization of time. 
NTP uses a hierarchical, Semi-layered system of time sources 
Each level of hierarchy is termed as "stratum" and is assigned a number starting with zero at the top.
uses a protocol UDP with a port number 123.

Points to remember : 

-> client adjust their time from what they hear from an NTP server 
-> NTP server supply time to clients. 
-> NTP need a trusted Source clock source 
	ex. Domain controller in your network or NTP server on internet. 
Stratum Level : 
	Defines the quality of the time source. 	
	The lower the number the better the time source. 
		

commands : 

Configure NTP Server : 

R1(config)# clock timezone GMT 0 0
R1(config)# clock summer-time british_summer recurring last Sun Mar 1:00 last Sun Oct 1:00
R1# clock set 23:19:10 16 August 2016 
R1# show clock 
R1(config)# ntp master 10  : this means that this is the trusted source for time 
R1(config)# ntp source loopback 0 
R1# show ntp associations
R1# show ntp status 
R2(config)# ntp server <R1_loopback_addr>
  
Configure Syslog server : 

Syslog allows us to centralize log messages as well as store a historical backups of various log messages. 

R1(config)# logging host <syslog_server_ip_address>

------------------------------------------------------------------------------------------------------------------------------

DHCP (Dynamic Host Configuration Protocol )

Commands : 
R1# show ip dhcp binding 
R1(config)# ip dhcp pool <poolname>
R1(dhcp-config)# network 10.10.10.1 255.255.255.0
R1(dhcp-config)# default-router 10.1.1.254
R1(dhcp-config)# 10.1.1.254
R1(dhcp-config)# lease <number_of_days / infinite> 
R1(dhcp-config)# domain-name davidbombal.com
R1(config)# ip dhcp excluded-address <ip_address>
R1# show ip dhcp pool 
  
An Address pool in Cisco terminology is very similar to a scope 

1. DHCP Discover : Client sends a broadcast message 255.255.255.255 trying to discover DHCP Servers on the network 
2. DHCP Offer :  Then DHCP server offers an ip address to the client 
3. DHCP Request : The Client will then request one of those ip addresses
4. DHCP Acknowledge : Then the DHCP server will acknowledge that request. 

NOTE : We also need to configure what's called an IP Helper address to forward DHCP requests to the router. 
      	S1(config)# interface vlan <vlan_id>
	S1(config-if)# ip helper-address <ip_address>
       We also need to configure static route from router to switch : 
	command : 
	R1(config)# ip 10.1.10.0 255.255.255.0 10.1.1.1
	R1(config)# ip 10.1.20.0 255.255.255.0 10.1.1.1

NOTE : DHCP message is Dropped by the router nad the layer 3 switch so we need a ip helper address 
	ip helper-address <ip_address>
	  		 
------------------------------------------------------------------------------------------------------------------------------

Domain Name System (DNS) : 

It essentially resolving a domain name to an IP Address.

A Record is a record in Domain name in IPv4.
AAA Record is a record in Domain name in IPv6.

NOTE : Some Server will not allow you to connect directly on the IP address , That's typically because multiple Domains are 
hosted on a single IP address. 

Port numbers are assign in various ways, based on there ranges : 
System Port = 0 - 1023 
User Port = 1024 - 49252
Dynamic / Private / Random and Ephemeral Port = 49152 - 65535 
 
------------------------------------------------------------------------------------------------------------------------------

Port SPAN (Mirroring) : SPAN : Switch Port Analyzer 

Port Mirroring, also known as SPAN (Switched Port Analyzer), is a method of monitoring network traffic. With port mirroring enabled, the switch sends a copy of all network packets seen on one port (or an entire VLAN) to another port, where the packet can be analyzed.

Configuration : 

Switch1(config)# monitor session <span_session_number> source vlan1 both 
Switch1(config)# monitor session <span_session_number> destination interface fastethernet 1/0/5

To remove the monitor session : 
Switch1(config)# no monitor session <span_session_number>
 
both is used for sent and receive 

show monitor 

NOTE : 

When you enable span on a switch , the switch no longer leans mac addresses on the span destination port. 
It also doesn't allow to be received traffic from that port.

To configure switch so that it can receive data from span port 
Switch1(config)# monitor session 1 destination interface fastEthernet 1/0/5 ingress untagged vlan 1 

another configuration example : 

Switch(config)# monitor session 1 source interface fastEtnernet 1/0/3 rx 
Switch(config)# monitor session 1 destination interface fastEthernet 1/0/5 

Dependencies and Rules with SPAN : 

1. A SPAN destination can only be used with one span session at a time.
2. A SPAN destination port can also be not a span source port 
3. Multiple SPAN sources can be used with a single SPAN session 
4. One SPAN Session
	: cannot mix interfaces and VLAN Sources 
	: Can use any combination of direction 
5. Etherchannel : 
	: Can be used as a source port in port mirroring / SPAN 
6. Trunks : 
	: Source Port 

------------------------------------------------------------------------------------------------------------------------------

Network Management Protocols : 

Performance Monitoring : 

ICMP/Ping : 1. Availability calculation 
	    2. Latency response time 
SNMP 	  : 1. Used in all other statistics 
Windows System : WMI (Windows Management Instrumentation )
		- check for performance counter type values 
		
SNMP uses a UDP protocol PORT 161 

Configuring router with SNMP : 

Router(config)# snmp-server community public ro 
Router(config)# snmp-server community private rw 

Now we can use the PC and open a MIB Browser and we can fetch all the information about connected devices 
 
# Management Information Base (MIB) : 
-> MIB is a large entitiy 
-> MIB is a Database use for managing entities in a network  using protocol such as SNMP 
-> Object in the MIB is defined by ASN(Abstract Syntax Notation)
-> Tree Structure 
-> Each Entry in the MIB is referenced by an OID


# Object Identifiers (OID) : 
-> OID is included in MIB 
-> Used for polling a specific interface with a specific object identifier


# Performance Counter : 
-> Windows performance counter are commonly used when tracking data on a window system.

------------------------------------------------------------------------------------------------------------------------------

# Syslog : 

Some commands : 

1. R1# show logging 
2. R1(config)# logging console <0-7> 

0 - Emergency : system is unusable 
1 - Alert : action must be taken immediately 
2 - Critical : Critical Condition 
3 - Error : error connection 
4 - Warning : Warning condition 
5 - Notice : Normal but significant condition 
6 - Informational : information Message
7 - Debug : debug-level message  

DIN WE CAE

logging synchronous : if this command is enables this means that in between when we are typing and command if any syslog
comes our command will be copy to as it is to the terminal. we need to press the tab key. 

To stop complete logging use : no logging console 

------------------------------------------------------------------------------------------------------------------------------

Cisco Router Components :  

1. Cisco Router the entire cisco ios software into ram during the boot process 
2. The running configuration is stored in RAM 
3. NVRAM or Non Volatile Ram is used to store information such as the start-up config 
command to copy all changes : 
-> copy running config start-up config 

ROM : 
	- contains micro code for basic function to start and maintain the router 
	- Bootstrap code 
ROM also contain ROM Monitor which is used for password recovery and router disaster recovery functions 
- NON VOLATILE 
- IP Routing table : contains directly connect or remote connected paths 

ARP cache : 
	IPv4 to mac address mapping 
Packet Buffers : when the packet are received on the interfaces before they exit interface.
If an interface is congested the buffer of the outgoing interface will fill up with packets in the queue to be processed 
out of an interface. 

Configuration Register : This store the information how a router boots 

	
# Power on Self Test : 
	- Test the Basic Functionality of the Router Hardware 
	- working 
	- supported 
	- which component are present 
# ROM Monitor : 
	- Low level Operating system 
	- Troubleshoot 
	- Password Recovery 
	- Testing 
	
Router Demo Commands : 

1. show version
2. show flash 
3. show running config | redirect flash:/showrunning.cfg
   this command will create a flash and copy the running config into it 
4. more flash:/showrunning.cfg 	
   this command will print the content of the showrunning.cfg 
5. show startup-config 
   display the stored configuration in the NV ram 
6. erase startup-config
7. copy running config start-up config


Configuration Registers : 

The configuration register contains different options one of them determine how router boots(Router Behaviour). 
Configuration Register is a 16 Bit number 

show version 
Configuration register default value is 0x2102

Last value or the Least significant 4 Bits of the configuration register is called boot field and this value determine how the router boots up 

To change the configuration value of register run : 
R1(config)# config-register 0x2100 
Now it will boots up in ROM monitor Mode. 

rommon 2 > confreg 0x2102 
conifiguration register value of 0x2142 is used for password recovery. It will ignore NVRAM content. 

Some Important Configuration Register Value : 

0x2102 : Normal Bootsup 
0x2100 : Boots in ROM Monitor mode 
0x2142 : Bypass startup configuration file (Ignore NVRAM)
0x2101 : Boot into RxBoot if supported 
	 On all the Cisco Routers they had a mini ios called Rx Boot. 
	 Router will boots using the first OS in the flash 

# Boot Field and software, Router Boot process : 

-> Steps that the router takes when booting up : 
	1. Perform POST (Power on self test) 
		- Series of hardware tests that verifies that all the cisco router are functional 
		- Executes from Microcode 
		- The Router then load and runs the bootstrap code 
			- Locating the cisco ios software 
			- Loading it into RAM and Running it 
		- Loaded and running the bootstrap code 
	Remaining in Udemy Notes 
			 
# Cisco IOS : 

The Cisco IOS is a single file that router will oad into RAM when it boots up typically from flash.
Cisco IOS Provides a feature called the Cisco iOS integrated file System or CISCO IEFS, This system allows you to create, Navigate, and manipulate directories on a cisco device. 

R1# show file systems 
Show running config command : Running config found in system 
show start-up config command : start-up config found in NVRAM 
show flash command : Refer to the default file system flash0
 

# backup IOS to TFTP server : 

Commands : 
1. show flash 
2. copy flash:?
3. copy flash:<flash_name> tftp:
	This command automatically find the tftp server and start the copy process 


# Getting file from tftp server to the cisco router : 
comamnds : 
1. copy tftp: flash: 
2. then enter the tftp server ip address 
3. enter the ios file name ending with .bin extension	 

------------------------------------------------------------------------------------------------------------------------------

# Password Recovery : 

configuration register value be 0x2142
Password recovery requires: (1) Power Cycle (2) Console access 

1. right click on the router when the router is booting up and click on break, Now we are in rommon mode 
2. rommon 1 > confreg 0x2142
3. rommon > reset 
4. now we can use the "enable" command 
5. show start-up config
6. copy start-up config running config
7. now change the password 
8. change the configuration register back to 0x2102 : configure-register 0x2102

------------------------------------------------------------------------------------------------------------------------------

# Infrastructure Security : 
 

#1 Enable and Secret Password : 

R1(config)# enable password <password>
R1(config)# service password-encryption 
This command stores the password in clear text so it is not recommended to use this command.

R1(config)# enable secret <password>
This command store the MD5 hash of the entered password. 

NOTE password and secret password cannot be same !! 

#2 Disable services :

Disable the unused services. 
It Reduces the Attack area of the network devices. 

GNS3 R1# show control-plane host open-ports
	this command list all the ports and services that are listening on that ports

 
#3 Disable CDP : 

Disable the CDP on the internet facing devices.
R1(config)# no cdp run 

#4 Line Console Security : 

We can also enable password on console line 
commands : 
config terminal 
line 0
password <password>
end

line console 0 
login local 

#5 Telnet Security : 

Configuration of Telnet -> 
R1# config Terminal 
R1(config)# line vty 0 5 
R1(config-line)# password <password>
or 
R1(config-line)# login local
or 
R1(config-line)# secret <password>

Note : Telnet send the data in unencrypted form.

# 6 Sessions and lines : 

Router# show users 
to start a new session on any router use : ctrl+shift+6+x
Router# show line 
Router# clear line tty <tty_number>
show session 
directly input the session number to interact 
disconnect <session_number>

#7 SSH : 

configuring ssh 
1. hostname must be different from default one like router and switch 
	-> hostname R
2. R(config)# ip domain-name cisco.com 
3. R(config)# username <username>  
4. R(config)# password or secret <password>
5. R(config)# crypto key generate rsa -> the router will generate a private and a public key 
6. R(config)# line vty 0 6 
7. R(config-line)# transport input ssh
8. R(config-line)# login local 

Now to login from the another router run 
R1# ssh -l <username> {IP_address}

#8 Banners : 

Banner is allow to display text when a user is connected to a cisco router or switch.

MOTD (Message of the Day) Banner :
To Display a tempporary message

LOGIN Banner : 
Is shown before the user logs in 

EXEC Banner : 
To Display information that only internal staff should know 

command : 
Router(config)# Banner # ******* BANNER ********* # 
	 
------------------------------------------------------------------------------------------------------------------------------

# Port Security 

Provide a level of authentication 
What port security does ?? 
It looks at the source mac address of frames received on the port and you can restrict the frames allowed on a specific port 
to either a single mac address or to a limited number of MAC addresses that are dynamically learned.

This is not use authentication : 

Only frames from specific MAC addresses are allowed. 
Limited Number of MAC addresses are permitted. 
connecting to a port that they are not authorized to connect to Stopping a user connecting a hub or a Wireless access point 
to the network.

There are several ways through which mac Addresses can be learnt : 

1. Static : Statically configure specific MAC addresses that are allowed or permitted on a port.
	Advantage : A lot of control
	Disadvantages : Manually Workout what the MAC addressess are 
2. Dynamically Learnt : How Many MAC addressess are permitted on a port 
			To limit the MAC Addressess Permitted but not which MAC Addressess are Permitted. 
3. Sticky Learning : Automatically add a learnt MAC address to the running configuration of the switch 

Port Security : 	
	- Limit the number of MAC address permitted on the port 
	- Specify which mac address are permitted on a port 
	- Option of permitting two mac addressess on a port 
	- That would stop user bringing access point or home router 

configuration of port security on switch :   
*****************************************
S1(config-if)# switchport mode access
S1(config-if)# switchport port-security 
S1# show port-security address 
S1# show port-security interface <innterface_id>
*****************************************

Configuring mac address statically : 
*****************************************
S1(Config)# interface <interface_name>
S1(Config-if)# switchport port-security maximum <1 - 4097>
S1(config-if)# switchport port-security mac-address <mac_address>
S1(Config-if)# switchport port-security violation <Protect, Restrict, Shutdown>
S1(config-if)# do show interface status 
S1(config-if)# do show port-security interface <interface_id>
S1# show port-security address 
*****************************************
1. Protect Mode : Drops Packets with unknown source MAC addressess until you remove ie we are dropping packets from unknown source
		  - Dropping of Packets 
2. Restrict Mode : Drops packets with unknown source MAC address Until you remove a sufficient number of secure MAC Address 
		  - To Drop below the maximum value 
		  - It cause the security voilation counter to increament. 
		  - Generation of Log messages and counter will increamented. 
		  - Dropping + Logging of violation 
3. Shutdownn Mode : It is the default mode 
		    Put the port in Error Disable Mode and sends a SNMP Trap notification. 		  

Configuring sticky mac address : 
*****************************************
S1(config-if)# switchport port-security mac-address sticky
Write the mac address to the running configuration 
 
*****************************************

Port Security Error Disable and Auto Recovery : 
*****************************************
S1(config)# errdisable recovery interval <interval_time_in_second>
*****************************************
------------------------------------------------------------------------------------------------------------------------------

# 802.1X 

Wired Ethernet Network has no 
	- No Authentication 
	- No Authorization 
	- No Accounting 
AAA Server is a way to centralize policies that are applied to network devices 

Authentication : You are Authenticating a username and password before a user can access the network. 
Authorization : Determines what you are allowed to do 
		Privilege mode
Accounting : is a log of what's happenend on the network 

Note : you can implement a identity based authentication or identity based networks by using a protocol called 802.1X 
client machine has to present username and password before they gain access to the network. 

It consists of Three Roles : 
	Supplicant (client) : windows, linux PC running 802.1X software 
	Authenticator : This doesn't authenticate the client but sends the authentication information to the Authentication Server, This is like a Ethernet Switch which is controlling access to the network, This device only permit 802.1X frames before authentication takes place. 
	Authentication Server : This validates the credentials of the client , it makes sure that the username and the password of the client is correct.  
RADIUS or TACACS are the protocol used between the authenticator and the authentication server.  		

NOTE : 802.1X : The Client Cannot access the network until the authentication has succedd. 

The username and password information is stored on each router or switch individually. 
R1(config)# username David password Bombal 
R1(config)# line console 0 
R1(config-line)# login local 

Now we have to configure this configuration to every router to centralize this cisco has a cisco ACS server.  

------------------------------------------------------------------------------------------------------------------------------

RADIUS and TACACS : 

When a client login to the network device they will be prompted for their credentials But that information is not checked 
against the local username and password database but is forwarded to an authentication server such as cisco ACS using the two 
proocol : 
	- Radius
	- tacacs 
So the username and password information is forwarded in encrypted format to the authentication server and a response is sent 
back from the server to the authenticator. 

Radius : Radius is an open standard protocol that combines authentication and authorization into a single process. 
	 It uses UDP 
Tacacs+ : It is a Cisco Proprietary protocol that seperates the service authentication, authorization and accounting. 
	  It uses TCP/IP 
	  
Features 		TACACS+ 		RADIUS
Often used 		Network Device		Users
Port Num. 		49			1645,1812
Encrypt the Pass.	yes			yes
Encrypt the entire	yes			No
packet   

------------------------------------------------------------------------------------------------------------------------------
Configuring AAA : 

R1(config)# aaa new-model 
R1(config)# line console 0 
now login local doesn't work
R1(config-line)# login authentication WORD/default
R1(config)# tacacs-server host <ip_address_of_cico-ACS_server>
R1(config)# tacacs-server key [key]
R1(config)# aaa authenticate login [WORD/default] group tacacs+ local  
Default means that this authentication method is going to be applied to all the lines on the router that means the console, VTY 
auxilliary port, tty lines 

line console 0 
login authentication default 

line vty 0 5 
login authentication default 


********************************************
Now we use groups to configure 

aaa new-model 
username david password cisco   ---> this is the backup username and password

tacacs server acs
address ipv4 <acs_server_ip_address>
key cisco
exit

aaa group server tacacs+ acsgroup 
server name acs
exit

aaa authentication login default group acsgroup local

------------------------------------------------------------------------------------------------------------------------------

# Access Control Lists : 

Implementing Security using access control list : 

Outline : 
	Purpose of ACLs 
	Inbound and Outbound ACLs
	Numbered, named, standard and extended ACLs 
	Wildcard Masks 
	Time Based, reflexive and dynamic ACLs 

Why ACLs ? 
	- Permit or Deny packets moving through a router 
	- Permit or Deny vtp access to or from a router 
	- Without ACLs, all packets could be transmitted to all ports of the networks 
	- interesting traffic for VPN connection 
	- Redistribution between routing protocols
	- NAT - which packets are to be translated ? 
	- Permit or Deny packets moving through a router 

Create ACL in global configuration Mode  :
	- access-list command : create the access list 
Apply inbound or outbound to an interface : 
	- access-group command : Bind the access list  

NOTE : ACL does not take effect until its applied. 

Inbound Access control lists : 
	- Applied inbound to the interface 
	- ACL processed before being routed 
	- if discarded, will not have to be processed for routing 
	- if permitted, will be processed for routing
  	
Outbound Access Control Lists : 
	- Routing performed first 
	- Packet is directed to an outbound interface 
	- Permitted - packet transmitted 
	- Denied - Packet is Droped 

Note : It is more efficient to bind an ACL to the inbound on the interface because packets that are dropped will need not to 
       be processed by the routing process on the router. 
	
An access list is sequential list of statements where packets are evaluated from the first statement to the last. 
	- Packets evaluated top down 
	- if a match 
		- Permit
		- or deny 
	- if line does not match
		- check the next line 
	- if no match in the ACLs is found, implicit deny at the end
		- Packets are dropped 
	- Must have atleast one permit statement 	

Types of Access control list : 
	- Standard ACLs : 
		- Check for Source IP Address
		- Permit or deny entire protocol suite 
	- Extended ACLs : 
		- Checks both Source and Destination IP Address 
		- Permits or Deny specific protocols and applications 
		- Permits or Deny based on Protocols or port numbers 
	
Two methods to identify standard and extended ACLs : 

1. Named : 
	-> Alphanumeric characters 
	-> More Descriptive  

2. Numbered : 
	-> 1 - 99 and 1300 - 1999 for standard IP ACLs 
	-> 100 - 199 and 2000 - 2699 for extended IP ACLs 
	-> Number range specifies protocol (IP/IPX/AppleTalk)
	
NOTE : The Remark Option allows you to add a description to your ACLs 

Wildcard Masks : 

	- Match a specific IP address 
		- access-list 1 permit 192.168.0.100 0.0.0.0
			or use
		- access-list 1 permit host 192.168.0.100
	- Match Anything 
		- access-list 1 permit 0.0.0.0 255.255.255.255
			or use 
		- access-list 1 permit any 
	- Match any subset 
		- access-list 1 permit 192.168.0.100 0.0.0.255 

Guidelines For ACls 

- Standard / Extended indicates what can be filtered 
- Order of Processing is of importance 
	- Place more specific first 
- Implicit deny all at the end of every ACLs 
- Only one ACL can be Bind to 
	- Per Interface 
	- Per Direction 
	- Per Protocol 
- Overwritten without warning 

# Placement of ACLs : 

Place standard ACLs as close to the destination as possible 
	- Cannot match specific protocol 
Place extended ACLs as close to the source as possible 
	- Can match specific protocols 
	
Commands to configure ACLs : 

Inboun extended access control list : 
********************************
Router(config)# access-list 101 permit tcp <source_ip> <wildcard> <destination_ip> eq 80 
Router(config)# access-list 101 remark [message]
Router(config)# access-list 101 permit udp <source_ip> <wildcard> <destination_ip> eq 69 
Router(config)# access-list 101 deny ip <source_ip> <wildcard> <destination_ip> 
Router(config)# access-list 101 permit ip <source_ip> <wildcard> any
Router(config)# interface <interface_id>
Router(config-if)# ip access-group 101 in 

To remove the particular access list from the extended list : 

Router(config)# ip access-list extended 102
Router(config-ext-nacl)# no <line number>
 
********************************

Lab of Access Control List : 

Router1(config)#access-list 100 permit tcp host 10.1.2.101 host 10.1.1.100 eq 80 
Router1(config)#access-list 100 deny ip 10.1.2.0 0.0.0.255 10.1.1.0 0.0.0.255
Router1(config)#do show run | i access

Now to delete any particular access list 

Router1(config)# ip access-list extended 100 
Router1(config-ext-nacl)#no <list_number>

To remove whole access list run : 

Router1(config)#no access-list 100

To edit any access-control list : 

Router1(config)#ip access-list extended 100
Router1(config-ext-nacl)#do show access-list
Router1(config-ext-nacl)#no 20
Router1(config-ext-nacl)#20 permit tcp host 10.1.2.102 host 10.1.1.101 eq 443
Router1(config-ext-nacl)#do show access-list

now we need to bind it to the interface on the router 

Router1(config-ext-nacl)# interface gig0/0/0
Router1(config-if)#ip access-group 100 in

------------------------------------------------------------------------------------------------------------------------------

Network address translation (NAT) : 
	- Static NAT 
	- Dynamic NAT 
	- PAT
NAT essentially translates a private ip address(which is non routable on the internet) to a publicly routable ip address 
your public IP address is typically allocated to you by your service provider.  
-> RFC1918 was drafted to try and conserve IPv4 address Rather than allocating public IP addresses to every device on the internet Devices within the companies could be allocated these private addresses.
-> ISP will block all the traffic if this packets are generated by private addresses. 
-> NAT Translate a private IP address -> public IP address 
->   

- Inside Local - It is the IP address of this inside host on the local LAN. 
- Inside Global	- It is the IP address of this Local PC as seen on the global internet. 
- Outside Local - Is the IP address of the outside server when seen on the local area network. 	
- Outside Global - It is the Ip address of the server on the global internet. 

IANA supply the public IP address 
IANA allocated Public IP addresses to groups like AFRINIC, APNIC, ARIN, LACNIC, RIPENCC(Europe) 

Static NAT : 
	- Maps a private IPv4 address to a public IPv4 Address 
	- One to One Mapping 
	- this type of nat is used by servers which require static IP Address. 

Dynamic NAT : 
	- Maps a Private IPv4 Address to a Public IPv4 address from a group of public ip addresses or from a pool of addresses
	- Not very efficient 
	- used when necessary 
	- Ismai pool hota hai public IP addresses ka usmai se addresses map hote hai internal network par. 
	- Mapping will be removed as the communication ends. No permanent one to one mapping 
	- Automatically created. 
		
Port Address Translation (PAT) : Maps multiple IPv4 Address to a single public IPv4 Address. Like a Home network. 
				 This Uses port numbers to differentiate between the different translation 
				 It is also known as NAT Overloading 
				 we are overloading a single public ip address with multiple ip address 
				 It is a type of Dynamic NAT 
				 Common Type of NAT 
	When Mistakenly if the more than one pc chooses the same port then the router will change the port number to make a 
	difference in NAT entry 
	

Creating a static nat : 
********************************
ip nat outside 
ip nat inside
ip nat inside source static <inside IP address> <public_ip_address> extandable 
show ip nat translations 
********************************			 
 
creating a Dynamic Nat : 
There are two router on left side of the middle router and a single router on the right side of the middle router 
interface 0/1 is on right of the middle router 
interface 0/0 is on left of the middle router 
********************************
interface gig 0/1
ip nat outside 
interface gig 0/0
ip nat inside 
R2(config)# access-list 1 permit 10.1.1.0 0.0.0.255 
Allowing any device in this network to be netted 
R2(config)# ip nat pool NAT-POOL 8.1.1.5 8.1.1.10 netmask 255.255.255.0 
R2(config)# ip nat inside source list 1 pool NAT-POOL 
R2# show run | i nat 
********************************

Configuring PAT : 
Netting Multiple Device to the Same IP address
or NAT overloading 
********************************
interface gig 0/0/0
ip nat inside 
interface gig 0/0/1 
ip nat outside 
R2(config)# ip nat inside source list 1 interface gigabitethernet 0/0/1 overload 
R2(config)# access-list 1 permit 10.1.1.0 0.0.0.255 
R2# show ip nat translations 
********************************

some commands : 
ip nat inside source static tcp 10.1.1.1 23 8.8.8.1 23 extendable 
show ip nat statistics 
------------------------------------------------------------------------------------------------------------------------------

# Quality of Service (QoS) : 

- Providing a better quality to certain application at the detriment of other applications. 
Managed Unfairness : Introducing unfaireness into the network. 
Three types of Traffic  : 
	1. Data
		- Bursty and Greedy traffic
		- Drop insensitive : if a packet is dropped, doesn't matter because it is retransmitted 
		- Delay insensitive : Depends on type of data is sent. 
		- 2 Major type of Data Application : 
			1. Interactive Data Application 
				- Telnet 
			2. Non Interactive Data Application 
				- FTP
	2. Voice 
		- Smooth : uses certain ammount of Bandwidth 
		- Drop Sensitive 
		- Delay - Sensitive 
		- Sent over UDP (no retransmission)
		One way requirement : 
		- Latency < 150ms
		- Jitter  < 30ms 
		- Loss < 1%
		- Bandwidth (30 - 128kbps)
	
	3. Video 
		- Video has a characteristics of both voice and data in that it is bursty and greedy 
		- Drop Sensitive 
		- Delay sensitive 
		- It uses UDP 
		One way requirement 
		- Latency < 150ms 
		- Jitter < 30ms
		- Loss 0.1% - 1%
		- Bandwidth (384kbps - 20+ Mbps)
 
Quality of Service : 
	- Priority to some session over other 
	- Policies 
	- Imlpement policies 

The Transmission quality of the network is determined by the following Factor : 

1. Loss : A relative measure of the number of packets that were not received compared to the total number of packets transmitted
2. Delay : The Finite ammount of time it takes a packet to reach the receiving endpoint after being transmitted from the sending
	   Endpoint 
3. Jitter (Delay Variation): The Difference in the end-to-end delay between packets. 

# Complete Process : 

1. Admission Control : give permission to the data that data should be sent or not. 
2. Classification and Marking : It essentially looking at traffic types and putting them into classes 	 	  
3. Policing and Markdown : If you are sending too much traffic, your traffic could be dropped 
4. scheduling : this includes Queuing and Dropping 
5. Traffic Shaping 
6. Link Specific Mechanism 
	
-> Marking is done using 802.1Q 
-> 802.1Q has a Priority Field (3 Bits in Size) also called as COS (class of service ) 
-> COS (Class of Service) : It is a 3 bit value goes from = 0 to 7 
			    Voice COS value is 5 
-> Marking packet to indicate to another device how important packet is. 
-> Marking require 802.1Q trunk ports 

# IP Precedence and DSCP : 

-> In IPv4 there is a field named type of service, it consists of eight binary value 
-> this value is known as DSCP (Differentiated service code points) 
-> When only 3 bits are used this is called as IP Precedence. 
-> When 6 bits are used then it is called DSCP 
-> COS value is DSCP is known as class selector (CS)
-> 8-bit differentiated services field (DS field) which consists of a 6-bit Differentiated Services Code Point (DSCP) field

Differentiated service Code Point (DSCP) : 

-> When all the six bit is set to zero is called as Best effor class (BE class)
-> Assured Forwarding class uses the first 5 Most significant bits from the DSCP
Class 1 : 
	AF1  =  001 010 = AF11
		001 100 = AF12
		001 110 = AF13 
CLass 2 : 
	AF2 =   010 010 = AF21 
		010 100 = AF22
		010 110 = AF23
Class 3 : 
	AF3 = 	011 010 = AF31 
                011 100 = AF32
                011 110 = AF33
Class 4 ; 
	AF4 =	100 010 = AF41 
                100 100 = AF42
                100 110 = AF43

Higher the first Number the more important the your traffic 
but Higher the second Number the less important your traffic. 

# Expedited Forwarding : The EF PHB can be used to build a low loss, low latency, low jitter, assured bandwidth, end-to-end
			 service through DS(Diffser) Domain.
			 This service is also been described as Premium Service 
			 CodePoint 101110 which equals to 46 as a DSCP value. 
# Class Maps : Class map is a way to create groups or classes of traffic 
# Classification and Marking Tools : 
	Layer 2 Parameters : 802.1Q Class of Service(COS) 
	Layer 3 Parameters : IP Precedence(IPP), Differentiated Service Code of Point (DSCP), 
# DSCP (6 Bits ) + Explicit Congestion Notification (2 Bits)
------------------------------------------------------------------------------------------------------------------------------

Trust Boundary : 
	Where the packets are classified and marked. 	
	
Untrusted Domain : It is the part of the network that you are not managing (PC, Printer)
Trusted Domain : It is the part of the network that only administrator can manage.(IP Phone, switch, Router)
In an enterprise network the trust boundary is the edge of the network.
For ISP it would be the last device that is manages. 
   	    			    	 	 
------------------------------------------------------------------------------------------------------------------------------
Classification and Marking : 
	Best Practice state that we should classify and mark as close to the edge of the netwok as possible. 
	so Marking takes places at the edge but every device along the path uses classification to determine what QoS that gets
Classification is based on three criteria : 
	1. COS or DSCP value 
	2. IP Addressing (Source (IP,port), Destination (IP,port), Specific IP,Mac add. )	
	3. Router can supoort Deeper payload inspection by using application signatures using 

Network Based application recognition (NBAR) : Router use NBAR to look deep into a packet determine how important traffic is. 
NABR uses layer 4 to 7 for deep inspection, generally done on the edge of the network. 
NBAR Modes of operation : 
	1. Passive Mode :
		Provide real Time statistics on application per protocol or interface and give bidirectional statistics such 
		as bit rate, packets and bit counts.   
		Give statistics but no marking 
	2. Active Mode : 
		Classifies application for traffic marking, so that QoS policies can be applied. 
		Give marking and Quality of service policies. 

------------------------------------------------------------------------------------------------------------------------------

Policiers and Shapers : 
	policing and shaping limits the ammount of traffic that you can transmit.
	they are Rate limiters. 
	
	- Policers : will drop the excess traffic 
		     Do Not delay the traffic
		     Remark it and transmit it 
		     Drop it  
	- shapers : will delay the excess traffic
		    Smooth traffic out by buffering it 
		    Excess Traffic is buffered and delayed 
 
Shaping implies the existence of a queue and of sufficient memory to buffer delayed packets, while policing does not.

Policers are generally used as a ingress tools : traffic is dropped before it processed 
When a policer drops the traffic, it causes a lot of tcp retransmission. 
policier doesnot introduce delay and jitter 
Shaped will introduce delay and jitter by buffering the traffic .  

------------------------------------------------------------------------------------------------------------------------------

# Congestion Management : 
	Queuing Mechanism Manages Congestion. 
	Queuing is used only when congestion occurs. 
	Traffic is processed based on the queuing algorithm used. 
	Queuing is the logic of ordering packets in output buffers.

# Scheduling : Is the process of Deciding which packet should be sent out next. 
	       Scheduling is Congestion independent. means it always in work whether there is congestion or not.
		  
NOTE : When the Queue become full packets are reordered so that higher priority packets can be sent out before lower priority.

# Congestion Management Queuing Mechanism : 

1. Fist In First Out (FIFO) : 
	A single queue with packets that are sent in the exact order that they arrived. 
	Problem : This algo is not good for voice and video traffic. 
	
2. PQ(Priority Queue) : 
	Consists of four queues that are serve in a strict-priority order. 
	The Lower Priority queue are served only when the higher priority queues are empty. 
	Problem : The Low Priority Queue could starve if there is constant traffic in the high, normal or medium 

3. Custom Queuing (CQ) : 
	16 Queue serviced in a round robin fashion 
	in order to prevent starvation 
	it provide traffic guarantees 
		- Doesn't Provide Strict Priority for real time traffic
	if you have important voice traffic arriving it will only be served in its round. 
	It introduces a delay. 
	
4. Weighted Fair Queuing (WFQ) : 
	- Algorithm that divide ethernet bandwidth by the number of flows 
	- It provide a good service for real time traffic 
	- No Bandwidth Guarantee for particular flow 
	- Smaller packets are passed first rather than large packets. 
It uses a clever scheduling algorithm to prioritize smaller interactive packets 
It Doesn't Provide Bandwidth GUARANTEE 
			 
5. Class Based Weighted Fair Algorithm : 
	developed by cisco. 
	Guaranteed bandwidth to a specific classes and provide dynamic fairness of other flows. 
	Different classes 
	ever class will get atleast Minimum Bandwidth 
	No Latency Guarantee : 	
		- There is no Priority Queue

6. Low Latency Queue (LLQ) : 
	fullname : Priority Queue Class Based Weighted Fair Algorithm 
				  		 
------------------------------------------------------------------------------------------------------------------------------

# Congestion Avoidance : 
	
WRED (Weighted Random early Detection) : 
	Randomly drops packets from multiple flows before the queue fills up. 
		

NOTE : Tail Drop : When the queue fills up All new packets will be dropped.  

------------------------------------------------------------------------------------------------------------------------------
IMP:

OSPF (Open Shortest Path First) : 
	- It is a Open Standard Protocol. 
	- Shortest Path First also known as the Djikstra's Algorithm is used to determine the shortest path or best route 
	  to a destination. 
	- Topics of OSPF : 
		- Features 
		- Single Area OSPF 
		- Loopbacks 
		- Configuration 
		- Multiple Area OSPF 
		- Authentication 
	
Overview : 
	OSPF :  - Link State Running Protocol 
	       	- LSA are flooded throught the network or area describing the links attached to a router. 
		- Link Router interfaces 
		- State Desciption of an interface and its relationship to neighbouring router. 
		- Creates neighbour relationships using 224.0.0.5 or unicast 
		- Resides Directly on top of IP 
		- Does Not use TCP or UDP 
		- Protocol ID 89 
		- resides at layer 3 
		- OSPF is reference with Protocol ID 89 in an IP version for header.
		- By default synchronized every 30 minutes. 
	
OSPF Tables : 
	1. IP OSPF Neighbor Table (Adjacency Table)
		Neighbouring Router 
	2. IP OSPF Topology Table (LSDB)
		All router and attached links in area / netwok
	3. IP Routing Table (Forwarding Table )	
		Best Routers 

OSPF Packets Types : 
	1. HELLO :
		- Dynamically Discover Neighbour 
		- Form Neighbour and maintain those relationship 
		- Defaults Intervals of HELLO packets : 
			- 10 Seconds on broad segment (Ethernet)
			- 30 Seconds on non- broadcast segment (Serial, NBMA)
		- Dead Timer : 
			- 4 Times hello interval by default 
	
	2. Database Description (DD/DBD) : 
		- Used to Exchange brief version of each LSA
		- If parts of the Database is missing on one router it will sent a Link state Request 
	3. Link State Request (LSR) : 
		- Requesting for Full LSA Information. 
	4. Link State Update (LSU): 
		- Neighbouring router will send LSU that is the packet which contain LSA 	  		
		- typically in response to LSR 
	5. Link State Acknowledgement (LSAck) : 
		- Confirm receipt of an LSU message 

Autonomous System (AS) : 
	It is a group of router under a common administrative domain 

OSPF is an IGP (Interior Gateway Protocol) Means it is used within an autonomous system. 
For scalability, OSPF network have broken up into different areas. 
Area 0 is known as the backbone area. 
All the traffic from one area to another area need to traverse via backbone area. 
Router that border the backbone area and another area is known as Area Border Router (ABR)
Autonomous system Border Router (ASBR) : It Borders two autonomous systems. When a router join to different protocol it is also
					 know ASBR. 
Router Which are in area 0 are known as backbone routers 
Internal Routers 

NOTE ** : For OSPF timers configuration must be same on both the devices.
timers can be influenced by the network command 
Ethernet is a broadcast multi access environment, no a NON BROADCAST environment that would be used for frame relay. 
Router(config-router)# ip ospf netwok broadcast 

OSPF router uses HELLO to form Neighbour Adjacencies. 

Hello Packet Contain : 

1. Router ID : A Router ID identifies the specific router, this id is used in election
	       A Router ID is the highest IP address of any configured interface or the highest loopback interface active on 
	       router. 
		Loopback take precedence over innterface ip address. 
		Loopback never go down unless manually configured as down
2. HEllo or Dead Interval : This must be the same on both the router. 
3. Neighbours : It contains a list if neighbours that the router knows about. 
4. Area ID : must also match on both router 
5. Router priority : Used in designated and Backup Designated Router. 
6. DR IP address
7. BDR IP Address
8. Authentication Password
9. Stub areaflag : Denotes whether this is a stub area or normal area . 		  


Designated Router : 

	- DR is used to Broadcast multi access environment such as ethernet and certain WAN implementation such as non broadcast
	multi axis environment on frame relay. 
	
Designated Router are selected on two criteria : 
	1. Highest Priority : The Default Priority is 1 
				Varies from 0 to 255
				0 is used to disable  
	2. Highest Router ID : if the priority is same then the router with highest router id is elected as the designated 
				router for the segment. 

	- Designated router are listening on this multicast address 224.0.0.6 other router are not listening on this address
	- The update is send to DR using the multicast 224.0.0.6 and then DR will send an update to all the other router using 
	  224.0.0.5 multicast address. 
	- If the DR fails then the BDR takes place as DR 
	- BDR become the DR if DR Fails 
	- after the election of DR and BDR all other router are called ""DR Others""
	
Shortest Path First Algorithm : 
	The algorithm places each router at the root of the tree and calculates the shortest path to each node using Dijkstras
	based on the cumulative cost that is required to reach the destination. 

Cost : 
	- Default reference bandwidth = 10^8
	- cost = ( 10 ^ 8 ) / Bandwidth
	- 1 kbps = 1000 bps
	- 1 Mbps = 1000,000 bps
	- 10 Mbps = 10,000,000 bps 
	
	# To change the reference bandwidth use command 
	auto-cost reference-bandwidth [Enter your bandwidth]
		
	# To change the cost on an interface use command : 
	ip ospf cost [Enter your Cost ]

NOTE : Stub and not so stubby area (nssa) are special types of area used to reduced the number of route in the routing. 
	
Configuring OSPF : 
	
R1(config)# router ospf [process_id] 
R1(config-router)# do show ip ospf interface 
For neighbour relationship to be established and for router to be advertised configure 
R1(config-router)# network [ip address] [wildcard_mask] area 0 
R1(config-router)# do show ip ospf interface
R1# show ip protocols 
R1# show ip ospf 	

Process ID should be differeny on all the routers 
R1(config-router)# network 0.0.0.0 255.255.255.255 area 0 
	This command will enable ospf on all the interface 

To manually configure ip address on a router : 
R1(config) router ospf 1
R1(config-router)# router-id 1.1.1.1 
R1# clear ip ospf process 
R1# show ip ospf neighbour 
R1# show ip ospf database 

NOTE : when a router is in between area 1 and area 2 then we need to create a tunnel from area 0 to area router which have both
       area 1 and area 2. 

configuring a virtual tunnel from router 3 (in area 0 ) to router5 (having area 1 and area 2) 

R3(config)# router ospf 1
R3(config-router)# area 1 virtual-link [router_id of router 5 : 5.5.5.5]

R5(config)# router ospf 1 
R5(config-router)# area 1 virtual-link [router_id of router 3 : 3.3.3.3]

-> After making the virtual links then also all the traffic will pass through the physical routers 
-> The Virtual link is simply used for OSPF link Advertisements. 

------------------------------------------------------------------------------------------------------------------------------

Internet Protocol Version - 6 (IPv6) : 

Outline : 

1. Need for IPv6 
	- Because of shortage of IPv4 address 

2. Format of an IPv6 address 
	- X:X:X:X:X:X:X:X where X is a 16 Bit HexaDecimal Field 
	- Case insensitive 
	- Leading Zeros are optional
	- Successive filds of zeroes can be represented as   :: 
		- But Only Once per address
	- 16 octects = 128 Bits 
	- written in Hexa Decimal.  

3. Surfing the Web : 
	- In a URL, enclose the IPv6 address in brackets 
		- http://[2001:1234:4567::8]:8080/login.php
		- IPv6 address should be enclose in [] 
	- That's Why use Fully Qualified Domain Names (FQDN)
	-   

4. IPv6 address Types : 

1.  Unicast Address :  
	    - Address for single interface 
	    - Several types 
		- Global Unicast Address : The address on your interface, on your PC at home will be unique globally.
		- Reserved unicast Address
		- Link Local unicast address :- Allow two hosts to communicate with each other without ip address being assign
					      to those devices. 
					      - Many IPv6 routing protocol also use linked local address to communicate with 
						each other.
					      - Link Local address are also used for link communication, such as Automatic 
						Address configuration. Neighbour Discovery, Router Discovery. 
		- Site Local Unicast Address : These are addresses assigned to an entire site within an organization, 
						So site local address would only be valid within the site network of an
						organization site. 
						They are deprecated and no longer in use. 
		- Special purpose unicast : 
			- Unspecified (::)
			- loopback (::1)
			- IPv4 Compatible : There address was also deprecated  
			
2. Multicast Address : 
	   - One to Many 
	   - Enables more efficient use of network 
	   - Uses a larger address range 
	   
3. Anycast Address : 
	   - One to Nearest (allocated from unicast address space) 
	   - Multiple Device share the same address 
	   - All anycast nodes should provide uniform service 
	   - Router Decide on closest device to reach destination 
	   - Suitable for Load balancing and content delivery address 
	
-> IPv6 LoopBack Address :->  ::1
-> There is no need for NAT in IPv6 

IPv6 Unicast Address : 
	- 64 Bits (Network prefix)	
	- 64 Bits (Interface Identifier)
	- > No Subnetting like in IPv4 
	- > No NAT in IPv4 
	- > Each Link will have a /64 Subnet Mask 
	- > Interface ID can use Modified EUI-64 Format 
	 	 

# IPv6 Aggregatable Global Unicast address : 
	
	Network Prefix 		Interface Identifier 
	   64 Bits 		     64 Bits 

   Global Prefix    Subnet ID 	    Interface Identifier 
      48 Bits        16 Bits 		64 Bits 
   Public Topology  Site Topology      Interface	
		
-> 2^16 gives you 65536 subnets 
-> ISP allocates you /48 
-> You allocate a /64 to each interface 
-> Uses a global routing prefix - enables aggregation 
-> every ipv6 interface contain at one loopback ::1/128
-> Optionally, Multiple unique local and global address 
-> Aggregation / Summarization more efficient 
 
# IPv6 Link Local Address : 

-> Have a scope limited to a link 
-> Are Automatically configured with the interface ID 
-> starts with  -->  FE80::/10

# IPv6 site Local Address : 

-> Have a scope limited to this site 
-> Contain the inside topology of the site with the subnet ID 
-> Have been Deprecated 
-> Start  with ---> FEC0::/10 

# IPv6 Compatible Addresses : 

-> In this address, the most significant 96 bits are set to zero and the last 32 bits is set to IPv4 address. 
-> Used to represent the addresses of IPv4 Node as IPv6 addresses 
-> Has been Deprecated. 
-> Tunneling 
-> 0:0:0:0:0:0:192.168.1.100
-> = ::192.168.1.100
-> = ::C000:0246 is in hexa decimal 

# Unspecified and Loopback address : 

# Unspecified Address : 
	- 0:0:0:0:0:0:0:0
	- Uses as a place holder when no address is available (initial DHCP request, DAD)
# Loopback Address : 
	- 0:0:0:0:0:0:0:1 
	- same as 127.0.0.1
	- Identifies itself 
    
# IPv6 Multicast address  :

	1. Assigned  (FF00::/8)
	2. Solicited-Node ; This is used similar as ARP but their is no broadcast so this is a multicast 
	
------------------------------------------------------------------------------------------------------------------------------

# Stateless Autoconfiguration : 
	
-> Stateless configuration is a new function enabled by IPv6 
-> IPv6 is designed to enable auto configuration of IPv6 addresses on devices while keeping those address unique 
-> Enables serverless basic configuration of node as well as easy renumbering 
-> Router send periodic router advertisement messages using a link local address - from FE80::250:3EFF:FEE4:4C00 to FF02::1
-> 7 Days life time by default on cisco routers 
-> Routers uses a ICMPv6 which is known as Router Advertisement 
-> Prefix : 2001:0:0:1::/64 

FROM ROUTER TO OTHER ROUTERS 
-> Host Sends router solicitation to all router at FF02::2
-> ICMPv6 type 133
-> Host uses it's link local address FE80::/10 as source 

FROM ROUTER TO HOST
Router advertisement : Sends network type information : Prefix, Default Route 
-> Router Replies with ICMPv6 Type 134
-> Router uses it's link local address FE80::/10 as source 
-> Destination FF02::1 

NOTE *** : Host AutoConfigured Address  : Prefix Received + Link Layer Address 

------------------------------------------------------------------------------------------------------------------------------

Stateful DHCP (DHCPv6) : 

- It provide more control than stateless auto configuration 
- can be used concurrently with stateless autoconfiguration 
- can provide IPv6 addresses in the absence of router 
- can be used for network renumbering 
- can be used for automatic domain name registration of hosts using Dynamic DNS
 
Process : 

PHASE 1 : 
if a router is found : 
	- Host examines router advertisement to determine if DHCPv6 can be used 
Initially client will first detect the presence of routers on the link by using "Neighbour Discovery messages" 

PHASE 2 : 
if DHCPv6 can be used : 
	- Host sends a DHCP solicit message to DHCPv6 agents on multicast address FF02::1:2
	- uses a source address of FE80::/10 

If at least one  router is found the client will examine the advertisement to determine that DHCP version can be used 
if the router advertisemnt enable the use of DHCPv6 on the link OR if there is no router, The CLIENT will start a DHCP SOLICIT 
phase to find the server. 

Now both DHCP Server and DHCP relay will listen for DHCP solicit message on this multicast address  

PHASE 3 : 
if DHCPv6 cannot be used : 
	- Host uses stateless configuration 

------------------------------------------------------------------------------------------------------------------------------

IPv6 Routing Protocols : 

# IPv6 Routing Types :: 
  - Static 
  - RIPng (RIP next generation)
  - OSPFv3 
  - IS-IS
  - MP-BGP4 (Multi protocol BGP version 4)
  - EIGRP for IPv6 
 
NOTE : The ipv6 unicast-routing command is required to enable IPv6 before any routing protocol is configured 
R1(config)# ipv6 unicast-routing 
R1(config)# ipv6 router rip RIPng
R1(config)#  	

# RIPng : 
   - Similar to IPv4 
	- Distance Vector 
	- Radius of 15 hops 
	- Split Horizon 
	- Poison Reverse 
	- Based on RIPv2 
   - Updates : 
	- IPv6 Prefix, next hop IPv6 address 
    	- Multicast group of FF02::9 the all rip router, multicast group as the destination for RIP updates 
	- In IPv4 address is 224.0.0.9 
	- IPv6 is used for tranport RIP updates 
   - configuration : 
	- R1(config)# ipv6 router rip RIPNG1 
	- R1(config)# int f0/0
	- R1(config-if)# ipv6 rip RIPNG1 enable
	- R1(config-if)# ipv6 rip RIPNG1 default-information originate 
	
Configuring OSPF : 
	- R1(config)# ipv6 router ospf 1 
	- R1(config-rtr)# router-id [router_id]    
	- R1(confif-rtr)# int f0/0 
	- R1(config-if)# ipv6 ospf 1 area 1 
	- R1# clear ipv6 ospf process 
------------------------------------------------------------------------------------------------------------------------------

IPv4 to IPv6 Transition : 

Transition richness means : 
	- No Fix day to convert, no need to all convert at once 
	- Different transition mechanism available 
	
IPv4 to IPv6 Transition : 
	
1. Dual Stack : 
	Where we run  both IPv4 and IPv6 at the same time on a single host 

2. Tunneling : 
	We can setup a tunnel between routers to tunnel ipv6 over ipv4 
	We can implement this using both 
		1. Manual tunneling 
			- Configured Manually on both the router 

		2. dynamic 6 to 4 Tunneling 
			- Configured automatically 
			- Must Use 2002::/16 
			- Gives a prefix to the attached IPv6 network 
			- Subnet must have a mask of 48 
			- 2002::/16 + HexaDecimal(IPv4) = 48 Bits 

		3. Intra Site automatic tunnel addressing Protocol (ISATAP)
			- It is an overlay tunnel 

		4. Teredo Tunneling 	 
	-> IPv4 Header is appended to IPv6 header 
	-> On the other side IPv4 Header is strip off 
	-> Protocol type 41 is specified in IP header 
	-> 20 Byte IPv4 header with no option 
	
configuring tunnel : 
R1(config)# interface tunnel 0
R1(config-if)# ipv6 address [ipv6_address]
R1(config-if)# tunnel source [source_ip_address]
R1(config-if)# tunnel destination [destination_ip_address]
R1(config-if)# tunnel mode ipv6ip

now configure static route using tunnel 

R1(config)# ipv6 router [destination_ipv6_address]/[subnet] tun0
configure same steps to destinated router 

Proxying and translation (NAT-PT) : 
   - Translate addresses and Protocols 
   Command : 
	- ipv6 nat v4v6 source [Source IPv4 Address] [Destination IPv6 Address]
	- ipv6 nat v6v4 source [Source IPv6 Address] [Destination IPv4 Address]
	- ipv6 nat prefix [IPv6 Address]/96

   Note : This subnet should always be /96

------------------------------------------------------------------------------------------------------------------------------

# Implement IPv6 Addresses on Hosts 

# Stateless Address Auto configuration (SLAAC) : 
	- Dynamically allocate IP address to host 

# DHCP : 
	- To allocate IP address to Host PC's 

# IPv6 PC's and Host Uses : 	
	- Neighbour Discovery Protocol Instead of ARP
	- Neighbour's to Discover and exchange information 

# IPv6 Hosts : 
	- Hosts require an IP address to communicate 
	- They need to know what their subnet mask is 
	- They need to to know what their Default Gateway is 
	- They need to know what their DNS server is, so that they can resolve names to IP address 

# Neighbour Discovery Protocol (NDP) : 
  A Number of Functions regards with regards to IPv6 
	1. SLAAC : 
		- A host can discover which subnet or prefix it belongs to 
		- A host can use its MAC address for the host portion of IPv6 Address 
		- A router can dynamically allocate the network portion of the address to a host using slack 
		
		Discovery : Learn the IPv6 Address of the available IPv6 routers in the same subnet 
			    Need to determine the netwok portion of the address 

	# DAD (Duplicate Address Translation ) : DAD is used by the host to determine that no other host is using the same 
						 IP address 
		- IPv6 will first check whether another host is using the same ipv6 unicast address as itself before it tries
		  to use that address. 
		
  Neighbour Discovery Protocol is used Neighbour Mac Discovery 
  NDP replaces IPv4 ARP 
  
  ICMPv6 also includes Neighbour Discovery Protocol : 
	
	1. Router Solicitation : 
		- RS is sent to all the routers ( FF02::2 )
		- Router on the local segment will be subscribed to that multicast address (FF02::2) and will reply back with 
		  Router Advertisement.  

	2. Router Advertisement : 	
		- Sent By routers and include information such as 
		- Link-Local IPv6 Address of the router
		- Router Advertise themselves using multicast address (FF02::1)  
  NOTE : Router also sends unsolicited Router advertisement messages on periodic basis they will advertise the detail on the 
	 IPv6 Link and they send that again to FF02::1 
	 Now by Leveraging Neighbour Discovery Protocol, Router Solicitation and Router Advertisement Messages, Host can 
	 Discover which subnet they belong to. 

  So Router by using SLAAC can advertise their local Prefix and length to the host on the local segment.        

 	FF02:0:0:0:0:0:0:1  - All Node Address        224.0.0.1 - All System on that subnet 
	FF02:0:0:0:0:0:0:2  - All Router Address      224.0.0.2 - All Router on this subnet 
 
# Configuring DHCP in IPv6 : 
  1. Client : 
  2. Relay Agent 
  3. DHCP Server 
  
  configuring relay agent :
  router(config)# ipv6 unicast-routing  
  router(config)# host relay 
  router(config)# interface gig0/0
  router(config-if)# no shutdown 
  router(config-if)# ipv6 address [IPv6 Address]
  **this command will be configure on the interface where dhcp request enter 
  router(config-if)# ipv6 dhcp relay destination [IPv6 DHCP Server]

  Configuring DHCP Server : 
  Router_DHCP(config)# ipv6 dhcp pool mypool 
  Router_DHCP(config-dhcpv6)# address prefix 2001:FACE::/64 
  Router_DHCP(config-dhcpv6)# dns-server 2001:1234::2 
  Router_DHCP(config-dhcpv6)# domain-name ccnax.com 
  Router_DHCP(config-if)# ipv6 dhcp server mypool 
 
  Configuring Client : 
  client(config)# ipv6 unicast-routing
  client(config-if)# ipv6 address dhcp 
  client(config-if)# ipv6 enable 
  client(config-if)#   
	  	
------------------------------------------------------------------------------------------------------------------------------

Wide Area Network (WAN) : 
	
1. Point to point Protocols (PPP) : 	
	 Point to Point WAN Connection 
2. High Level Data link Control (HDLC) :
	
These are layered 2 encapsulation action that could be used on point to point serial connection which connect sites across 
disparate geographical areas. 
  
WAN (Wide area network) : 

This connects devices seperated by large geographical areas 
A PPP /Serial Link is also called as leased line Provides a decicated connection between two sites 
This uses a service provider network to provide the connection from one site to another. 
Now today many PPP are replaced by Virual Private network (VPNs) 
Where the connection is made across the internet 
A WAN is often represented as a cloud connecting multiple sites together.    
  
The Two layer that take part is : 

1. Physical layer : 
	Rather than using an ethernet encapsulation 
		- Frame Relay 
		- PPP 
		- HDLC 
		- ATM 
		- MPLS
	Ethernet WAN Connections 
	CSU : Channel Service Units 
	DSU : Data Service Unit 
A CSU/DSU (channel service unit/data service unit) is a digital-interface device used to connect data terminal equipment (DTE), such as a router, to a digital circuit, such as a Digital Signal 1 (DS1) T1 line. The CSU/DSU implements two different functions. The channel service unit (CSU) is responsible for the connection to the telecommunication network, while the data service unit (DSU) is responsible for managing the interface with the DTE. A CSU/DSU can have an externally connection point, or it can be integrated into a modular card installed in a router.

# VPNs vs Leased line 

Virtual Private Networks replaced lot of deployement of leased lines 
1. Leased Line : Implies that you are leasing the line from a provider 
		 You Don't Own the connection 
	            - A Montly leasing fee to leased the line from the service provider 
		 It is a dedicated circuit between two sites 
  
   Serial Link / Serial Line  : 
		 Refer to the fact that the bits sent across the wire flows serially and that router use serial interface to 
		 make the connection 
   Point to Point link / Point to point Leased line : 
		 Refer to the fact that you are making the connection between two points rather than between multiple sites
		 at the same time. 
	 	 	
Leased Lines : Synchronous Serial Communication 
- Two Device will Synchronized there clocks 
	- Align/Synchronize those clocks 
	- Agree on parameters for data transfer 
	- Including the data interval between bits of data
- CSU/DSU : Provide the clocking master for the communication 
	    Router is acting as slave and is receiving its clocking from the CSU 
	    Uses its own internal Clocking 
	
Before communication starts 
	- The Two Device have to align their clocks 
	- agree on the clock interval 
	
Data communication Equipment : 
	This will provide clocking to Data terminal equipment 
	It also terminates the connection from the carrier. 
Data terminal Equipment :  			
	The router which is the data terminal equipment uses external clocking received from the DCE 

Note : CSU/DSU or Data Communication equipment controls the speed and timing at which the router serial interface can send and 
       Receive bits over serial cable. 

------------------------------------------------------------------------------------------------------------------------------

Different Serial WAN Interface Card : 

WIC 1T : One Serial Cable 
WIC 2T : Two Serial Cable 
	
WIC : Wan Interface Card 

# Advantages of Leased Lines : 
  - You can get a leased line up and running with just a few commands 
  - Point to Point Leased Line also offers High quality of service 
  - the connection is also permanent 
  
# Disadvantages of Leased Lines : 
  - The cost of the leased line 
  - you are charged for the bandwidth whether you use it or not 
  - You are limited to the speed of your bandwidth 	

------------------------------------------------------------------------------------------------------------------------------

HDLC (High Level Data link Control) : 

Two main types of encapsulation : 
	
HDLC : 
  - Highlevel Data link Control - Layer 2 Encapsulation 
	- uses across a leased line providing layer 1 service or connectivity from one site to another 
 	
  - Cisco uses Cisco HDLC (type is added by cisco) 
  - Cisco added type field in HDLC because : 
	- To allow multiple higher layer protocols to traverse the link at the same time 
    Type field is used to differentiate between : 
	1. IPv4 
	2. IPv6 
    
The Industry version of HDLC does not have type field denoting high level protocols 

# Configuring HDLC : 

R1> enable 
R1# conf t
R1(config)# interface serial 1/0 
R1(config-if)# ip address 10.1.1.1 255.255.255.252 
R1(config-if)# encapsulation HDLC 

------------------------------------------------------------------------------------------------------------------------------

# IPv6 Routing OSPFv3 : 
	
  - Provides Routing Capabilites for IPv6 
  - If you have IPv6 then you can't use OSPFv2 (Used in Ipv4) 
  - OSPFv3 Expands on OSPFv2 to provide supports for routing IPv6 Prefix 
  - Supports for 128 Bit IPv6 Address 
 
# Similarities in OSPFv2 and OSPFv3 : 

  - Both Link-state Routing Protocol 
  - Both use the same area design concepts and terms 
	- Backbone Area 
	- Area Border Router 
	- Autonomous System border Router 
  - Both Check various settings before a neighbour relationship is formed 
  - Both Protocol Used Link-state Advertisements to advertise the details of network 
 
NOTE : configuration in different OSPF : 
 
In OSPFv2 we can configure using network command or by going to the interfaces 
But in OSPFv3 we can only configure it by go to the interface and enable OSPF 

OSPFv3 : 
  - The Neighbor relationship is now formed using a link local address instead of an interface IP address    
  - FF02::5 - To Advertise information to all OSPF routers
  - FF02::6 - For OSPF designated router and Backup Designated Router  
OSPFv2 :
  - IPv4 interface IP addresses for the neighbor relationship establishment 
  - Neighboring router have to be in same subnet 


# Configuration of IPv6 Routers : 

R1(config)# int loopback 0
R1(config-if)# ipv6 address 2001:FACE:1::1/64
R1(config-if)# int gig0/0
R1(config-if)# ipv6 address 2001:1::1/64 
R1(config-if)# no shut 
R1(config)# ipv6 unicast-routing 
R1(config)# ipv6 router ospf 1
**R1(config-rtr)# router-id 1.1.1.1
R1(config)# int loop0
R1(config-if)# ipv6 ospf 1 area 1
R1(config-if)# int gig0/0
R1(config-if)# ipv6 ospf 1 area 1

------------------------------------------------------------------------------------------------------------------------------

# IPv6 Access List 

  - Permit or Deny traffic in your network 
  - Source IP address or Destination IP Address in the protocol header 
  - Individual Host addresses or subnet prefixes 
  - Applied in an outbound or Inbound Direction 
  - Transport layer protocol information 
  - Implicit Deny at the end 
  - Time Based Access list 
Both are independent to each other "koi ko kisi se matlab nahi hai !! :)" 

IPv6 uses only name to identify the ACLs 
IPv4 Uses both Name/Number to identify the ACLs

Extended and Standard are defined by their name in IPv6 not by their numbers 

Ipv6 have some implicit permit statement at the end of each access list just above the implicit deny all 
IPv4 Do not have any implicit permit statements 

the Ipv4 access list have no effect on ip version 6 packets and vice versa 

We dont have to block ICMpv6 or ICMPv4 Because some protocol required for neighbour discovery 

IPv6 access list is created using a prefix length number that indicates the number of contiguous prefix mask bits 
so we use a slash notation where the number after the slash indicates the number of bits in the prefix 

------------------------------------------------------------------------------------------------------------------------------

# Configuring Access List : 

Router(config)# ipv6 access-list acl1
Router(config-ipv6-acl)# permit [source_ipv6_address] any
Router(config-ipv6-acl)# interface gig0/0
Router(config-if)# ipv6 traffic-filter acl1 in
Router# show ipv6 access-list  

------------------------------------------------------------------------------------------------------------------------------

# VPNs : 

What is VPN ? 

VPN is a encryped connection between private networks over a public network such as the internet 
  - Private Information across the internet 


------------------------------------------------------------------------------------------------------------------------------

# What are we trying to accomplish ? 

1. Data confidentiality : 
	- No one else should be able to read the information by manipulating the data 
	- Provided by data encryption and keys 
2. Data Integrity : 
	- know that the data has traversed unchanged between two parties 
3. Data Origin Authentication : 
	- The receiver can verify that the protected data could only have originated from the server 
4. Antireplay Protection : 
	- Verify that each packet is unique and not duplicated 

  
------------------------------------------------------------------------------------------------------------------------------

# Cryptography Terminology : 

1. Algorithm : 
  	- Detailed steps for performing a function 
2. Cipher : 
	- An encryption algorithm 
3. Asymmetric algorithm : 
	- An Algorithm in which different keys are used for encryption and decryption 
	- Public key algorithm are asymmetric 
4. Symmetric Algorithm : 
	- An algorithm in which the same key is used for encryption and decryption 
	- secret key algorithm are symmetric   
5. Key : 
	- Is a bit of information that is required to decrypt the message, usually in the form of a value that is used with 
	  a cipher to encrypt the message 
	- The Key must be kept secret in order for the message to remain private 


------------------------------------------------------------------------------------------------------------------------------

# Symmetrical Algorithm : 

  - The Same Key is used to encrypt and decrypt the messages 
  - Both the sender and receiver must have the same key 
  	- We will need to communicate this out of band 
  - Good Symmetric Ciphers are fast, secure and easy to implement using modern microprocessors 
  - DES, 3DES, AES, Blowfish 

# DES : 
  - DES is a symmetric key encryption 
  - Fixed Key length = 56 Bits 
  
# 3DES : 
  - 3DES is also a symmetric key encryption 
  - Encrypt with key 1 
  - Decrypt with key 2 
  - Encrypt with key 3 
  - K1 = K3 = 112 bit key length  
  - K1 <> K3 = 168 bit key length 

# AES : 
  - Advanced Encryption Standard is the recommended symmetric key algorithm  

------------------------------------------------------------------------------------------------------------------------------

# Asymmetrical algorithm : 

  - Asymmetrical ciphers uses a different key to decrypt than was use to encrypt 
  - Solves many long standing problem like how to exchange the secret keys in first place 
	- Solves : How do we send the decided private key to each other without it being intercepted ? 
        - Solves : Without a secure channel, there is no way to establish a secure channel 
  - Long Key lengths of 512 to 2048 bits 
 
# Diffie Hellman (DH) : 
	- DH discovered a way to securely create a secure channel to exchange a shared secret key, which is required by 
	  algorithm like AES, DES , 3DES.
	 
	DH1 = 768 Bits 
	DH2 = 1024 Bits 
	DH3 = 1536 Bits 

Asymmetric encryption is used to establish a secure channel. 
Symmetric Key encryption is used to encrypt bulk data (AES). 

------------------------------------------------------------------------------------------------------------------------------

# Integrity 

  - Ensure that data has not been tempered with 
  - Know that the data has traversed unchanged between two parties 
  - hash, trap-door, digest
  - one way 
  - converts to a fixed length hash - MD5 = 128 bits 
  - Not reversible - lost value 
  - hash will change if input value change 

MD5 : 128 Bits 
SHA-1 : 160 bits 
SHA-2 : 256/512 Bits 
SHA-3 : Scheduled for 2012 

# Hash Message Authentication Code (HMAC) :  

------------------------------------------------------------------------------------------------------------------------------

# Authentication : 

  - Knowing that data received is the same data that was sent and that the claimed sender is in fact that actual server
  - Goes beyond validating the source attempting to access a service during initial logon. 
  - you should also validate that the source has not been replaced by an attacking host in the course of the conversation
    (session hijacking) 

Two type of authentication : 

 1. Pre Shared Key (PSK) : 
	A secret key value is entered into each peer manually and is used to authenticate the peer 
 2. RSA Signature : 
	encrypt the hash with a private key 

------------------------------------------------------------------------------------------------------------------------------

# Certificate of Authority : 
  
  - COA as a trusted third party 
  - The Certificate of Authority does that by taking data from one side(public key ) and hash the data and then signing it with 
    certificate of authority private key. 
    data + public key -> hash the data + sign the data with private key 
	
  - This infrastructure is known as Public key infrastructure (PKI) 

------------------------------------------------------------------------------------------------------------------------------

# IP Sec : 

Ques : What is IP sec ?? 

  - IP Security
  - IP Security is a Network layer Protocol, It is a Suite of Protocols that protect and authenticate IP packets.
  - It's a Framework of Open Standards that is algorithm independent and thus can use multiple algorithms.

There are three main  IP Sec protocols : 

1. Internet Key Exchange (IKE) : 
   - Provide a framework for negotiating security parameters and establishing authenticated keys 

2. Authentication Header (AH) : 
   - NO encryption 
   - Authentication 
   - Integrity 

3. Encapsulating Security Payload (ESP) : 
   - Encryption 
   - Authentication 
   - Integrity 

# Mode of IP sec : 

1. Transport Mode : 
   - The Original IP Header of the packets being encrypted is used to transport the packet 

2. Tunnel Mode : 	
   - The original IP header is not used to transport the packets 
   - A New IP Header is tagged in front 
	- IP addresses of Peer Devices, not originating host and destination host 
  
# IPSec framework : 
   
   - IPsec protocol 
	- ESP or AH or ESP + AH 
   - Encryption : 
	- DES or 3DES or AES 
   - Authentication 
	- MD5 or SHA 
   - DH 
	- DH1 or DH2 or DH3  

------------------------------------------------------------------------------------------------------------------------------

# Types of VPNs

1. Site-to-Site VPNs :
	- IPSec Tunnel : Setup a secure VPN tunnel between R1 and R2 
	- established between router and router 

2. Remote Access IPSec VPN : 
	- Set up a secure VPN tunnel between PC and router 
	- PC uses software like the cisco vpn client 
	- You have to install a client side software 

3. Remote Access SSL VPN : 
	- Set up a secure VPN Tunnel between PC and router 
	- NO PC software is required 
	- Advantage is that you don't need to install any software. 

# Benefits of Using VPN : 
	- Cost Savings
	- Security 
	- Scalability 
	- compatibility and broadband 


------------------------------------------------------------------------------------------------------------------------------

# Generic Routing Encapsulation Tunneling (GRE) : 
 	
  - A GRE tunnel is a PPP tunnel that allows you to transport multi higher level protocols such as 
	- IPv4 
	- IPv6 
  - It doesnot provide authentication and encryption 
  - It supports multicast routing protocols 
  - GRE tunnel would be put inside an IPsec tunnel to provide the encryption and authentication  
  - GRE encapsulate other taffic 
	 - 20 Byte IP Header 
	 - 4 Byte GRE header 
 
Configuring GRE Tunnel : 

Router(config)# interface tunnel 0 
router(config-if)# ip address 10.1.1.1 255.255.255.252 
Router(config-if)# tunnel mode gre ip 
Router(config-if)# tunnel source [router outboud ip address] 
Router(config-if)# tunnel destination [dest. address] 

configure this on other side also 

Note We need to run routing protocol on both the end of the tunnel so the router will be advertise using tunnel 

------------------------------------------------------------------------------------------------------------------------------

# Cloud Computing : 
   - Hypervisors : 
	- A Hypervisor is computer software, firmware or hardware, that creates and run virtual machine 
   - A computer on which a hypervisors runs 
 
# Network Function Virtualization : 
   - Network Function Virtualization is the idea that you virtualize your network devices and network functions. 
 

------------------------------------------------------------------------------------------------------------------------------

# Wireless Networks : 
 
  - Two Bands 2.4ghz and 5.0 ghz 
  - 5ghz get absorbed lot more by a wall than a 2.4 ghz 
  - 5 ghz allow to you for high throughput or more data transmission through the network 
  - Dead Spot where the signal become very low 
  - Wifi is a type of hub 
 
	Wifi Generation 	Amendment 	Release Year
	   Wi-Fi 1 		802.11b		  1999
	   Wi-Fi 2 		802.11a 	  1999
	   Wi-Fi 3		802.11g		  2003 
	   Wi-Fi 4 		802.11n 	  2009 
	   Wi-Fi 5 		802.11ac	  2013
	   Wi-Fi 6		802.11ax	  2019 

SSID : Service Set Identifiers 
  - These identify different Wi-Fi networks  
 
# Radio Frequency : 
	
1. 2.4 GHz 
   - Range 2.400 to 2.4835 GHz 

2. 5 GHz 
   - Range 5.150 to 5.825 GHz
	- 5.150 - 5.250
	- 5.250 - 5.350
	- 5.470 - 5.725 
	- 5.725 - 5.825 

# Wi-Fi Channels : 

1. Wi-Fi 2.4GHz Channels : 
	1,6,11 are the channels that we should use so that we don't have overlapping transmission with other devices in the same 	frequency range. 

------------------------------------------------------------------------------------------------------------------------------

# Network Types : 

1. Adhoc mode Wireless Network 
	- In this mode we have two device that talk directly to each other 
	- Also known as Independent basic Service Set 
	- Clients connect directly without AP 

2. Infrastructure mode wireless network 

	- In this mode we have a wireless access point or wireless router and communication from device to device via access point 
	- Basic Service Set 
	- Mobile client uses a single AP 
	- Access point is connected to physical infrastructure 
	- Only ONE access point 

  Infrastructure mode : 
	- Extended Service Set (ESS) 
	- Two or more BSSs 
	- Connected by a common distribution system
		- A Common Physical Network that allows multiple users to connected to the WIFI network and then get to the 
		  internet or to get to the server and other system on the physical network 
	- In this we have MULTIPLE access Point  

------------------------------------------------------------------------------------------------------------------------------

# Autonomous access point : 
	- autonomous access point is an access point that you configure and manage directly 

# Lightweight Access Point : 
	- Lightweight Access point which require a wireless lan controller (WLC) to work  

------------------------------------------------------------------------------------------------------------------------------

# Wireless LAN Controller : 

A WLAN is a wireless architecture that aims to meet changing network demands. A WLAN controller manages wireless network access points that allow wireless devices to connect to the network.

What a wireless access point does for your network is similar to what an amplifier does for your home stereo. It takes the bandwidth coming from a router and stretches it so that many devices can go on the network from farther distances away.

Configuring WLC : 

  - WLC has a default ip address of 192.168.1.1
  - 	
WPA2 Personal : In this we are not using a radius server 
	- WPA Personal is also refered as WPA-PSK(pre-shared key) mode. designed for home and small officies network and 
	  doesn't require an authentication server. 
WPA2 Enterprise : this uses radius server for better authentication
	- WPA-Enterprise : Also refered to as WPA-802.1X mode, and sometimes just WPA(as opposed to WPA-PSK) Design for 
	  Enterprise network and require a RADIUS authentication server. 
 
NOTE 1. Vitual IP address is required by the controller, Cisco uses 192.0.2.1 by default now 
NOTE 2. You must need to configure WLC address in dhcp server 
 
 

------------------------------------------------------------------------------------------------------------------------------

# 802.11 Topologies : 

802.11 is a IEEE standard for WI-FI 

# Three types of Topologies : 

1. Independent basic Service sets (IBSS)
	- That basically a Adhoc Network 
2. Basic Service Set (BSS)
	- This use Infrastructure mode 
3. Extended Service Set (ESS) 
	- This also use infrastructure mode 

# Service Set : 

	- Logical Grouping of devices  

------------------------------------------------------------------------------------------------------------------------------

# Swich Staking : 
	
HSRP : In order to optimize routing we need to use HSRP. 

What is the advantage of stacking switches in this way ? 

Brief : 
  - When you stack switches they appear to be single switch. 
  - you configure as a single switch 
  - They act as a single switch 
  - Spanning tree and CDP see that switch as a single switch 
  - Cisco Various technologies that you can use to stack switches or aggregate chassis 
  
# Switch Stacking and chassis aggregation : 
  - Separate physical switches, work together and cooperate together to act and appear as a single switch rather than multiple
    discrete switches. 
Switch Stacking is often used at the access layer and chassis aggregation is often used at the distribution and core layer of 
network. 

1. You would manage the stack with a single management ip address 
2. Telnet or SSH to one switch 
3. One Configuration File 
4. STP, CDP, VTP are running on one switch 
5. The ports on each physical switches appear to be the part of the same logical switch 
6. One MAC Address table 

To connect the switch together you need special hardware ports called stacking port.
Stacking cables forms a ring between switches. 
One of the switch in the ring is stack master and it is used to control the rest of the switches in the stack. Brain of the stack


Chassis Aggregation : 

It is another cisco technology which allows you to make multiple switch operate at a single switch. 
It is used for higher end switches. 
Does not require special hardware adaptors 
2 switches 

------------------------------------------------------------------------------------------------------------------------------

In a traditional Network, every device has its own data plane or forwarding plane they have their own control plane.
RIB = Route Information Base (Software)
FIB = Forwarding Information Base (Hardware / ASICs )

Device talk to the controller using southbound API or South Interface (SBI) 
The controller at the top talked down to the device using southbound api.(OPENFLOW, cli, SNMP, NETCONF,RESTCONF) 
an application developer talk to the controller using Northbound api (REST API)  
# There are Three plane : 
	1. Management Plane : 
		- Telnet,SSH,SNMP, syslog 
	2. Control Plane : 
		- OSPF
 	3. Data Plane : 
		- IPv4 

# Differences between Puppet, Chef and Ansible : 

Ansible is Agent less : You don't have to run an agent on the router.
if you want to run puppet or chef, you have to run an agent which is a piece of software. 


Action 			Ansible 		Puppet 			chef
Term for the file	Playbook 		Manifest		Recipe, Runlist
that lists actions

Protocol to Network	SSH, NETCONF		HTTP(REST)		HTTP(REST)

User Agent or 		Agentless 		Agent			Agent 
agentless model	

PUSH or PULL Model	Push			PULL			PULL 

 
# Overlays, Underlays, VXLAN and intelligence : 

Underlay Network is physical infrastructure above which overlay network is built. An Overlay Network is a virtual network 
that is built on top of an underlying Network infrastructure/Network layer (the underlay). 
Transmits packets which traverse over network devices like switches and routers.

Overlay are like vitual tunnel. 

# Autopilot : 

we give computer a low level task and we take the high level task 

# SDA ( Software Define Excess ) : 

It is Cisco solution of changing the way a enterprise network works. 
We building tunnels automatically the excellent tunnel , where we build an overlay across the underlying network 
Tunnels VXLAN which allows us to apply policies on the overlay network  rather than underlaying network 
SDA is an enterprise solution where we take software defined principle and apply it to an enterprise and we apply policies 
on that network rather than in a data center 

------------------------------------------------------------------------------------------------------------------------------

# JSON : Javascript Object Notation : 

Json is a way to format data, It also way to send data from one machine to another

# JSON Data : 
	 
  - JSON Data is written as name/value pairs : 
  - A Name / Vaue pair consists of a field name (in double quotes), Followed by a colon, followed by a value 
  - "firstname" : "David"

# Type of JSON data : 

1. Objects : 
   - Unordered collection of key:value pairs 
   - Data surrounded by curls brackets 
   - Key and value is separated by : 
   - Each key/value pair is separated by commas 
   - Use double quotes not single quotes 
   - Boolean value must be lowercase 

Practical : 

   - show interface vlan 100 | js 
   - show interface vlan 100 | json-pretty 
   - show ip interface brief | json-pretty 
 
Json Data tyoes : 
	
1. Array : 
   - Ordered list of values 
   - uses square bracket [ ] 
   - can store multiple types : 
	json array can store valid json data types such as strings,numbers, boolean, object, null or another array 
   - values must be seperated by commas.  

2. Raise :  
 
------------------------------------------------------------------------------------------------------------------------------

# Rest APIs : 

REST : Representational State Transfer 
   - It is architectural style for distributed hypermedia system 
1. Client-Server 
2. Stateless 
3. Caching
4. Uniform interface 
5. Layered System 
6. Code on Demand 

# CRUD : 

(POST) :  Create : Allow the client to create some new instances of variable and Data structure at the server and initialize 
	    	   their values as kept at the server.

(GET) Read : Allow the client to retrieve the current value of variable that exist at the server, storing the copy of the 
	     variables,structures, and values of the client. 
	 
(PATCH, PUT) Update : allow the client to change the value of variable that exist at the server. 

(DELETE) Delete : Allow the client to delete from the server different instances of data variables. 

Application Programming Interface allows us to get one application to interact with another application.
  	
------------------------------------------------------------------------------------------------------------------------------



------------------------------------------------------------------------------------------------------------------------------

Cisco Packet Tracer Commands 

show mac-address table  : display the mac address table 
enable 			: change user exec mode to privilege mode 
show version		: display the version 
configure terminal  	: for device configuration 
host [hostname]		: to change the host name 
copy running config startup config : to save the running configuration or to saving it on NV (Non-volatile ) Ram 
wr			: same function as the copy running config startup config
Router# show ip interface brief : show all the interface 
interface [interface]	: Set the interface = interface gigabit 0/0/0  
router(config-if)# ip address [ipaddress] [subnet mask] : this command will set the IP on the selected interface 
Router(Config)# enable password "password": used to implement password.
Router(Config)# service password-encryption : encrypt the clear text password
Router(config)# enable secret [password] : it provide more security and it overrides the enable password
router(config)# line vty 0 5 : To configure telnet
router(config-line)# password cisco : set the password to telnet 
!
!
!
- Allow DHCP Server on Router : 
ip dhcp pool network 101
network 10.1.2.0 255.255.255.0
default-router 10.1.1.254
dns-server 10.1.2.254
!
!
do show vlan brief : Show all the vlans and the interfaces 
vlan [number] : create a vlan 
switchport mode access 
switchport mode trunk 
switchport mode dynamic desirable 
switchport mode dynamic auto 
switchport nonegotiate : to disable DTP 
show interface [gig] switchport 
core(config)# ip routing : this enable ip routing to allow switch to route from one SVI(switch virtual interface) to another  
show vtp status : show the number of VLANs and many other details 
!
!
!
show dtp interface g0/0
!
!
!
!
show spanning-tree 
show spanning-tree vlan <vlan_num> : show the spnning tree of Vlan
!
!
Switch(Config) #spanning-tree vlan 10 root primary : this command force the router to be the root bridge. 
!
!
!
configuring portfast 
!
int g0/0
spanning-tree portfast
!
!
show spanning-tree vlan 10 int gig 0/0 detail : this give you complete details of that port
show spanning-tree vlan 10 summary 
spanning-tree portfast default : all the access port now having port fast enabled
!
!
! 
show cdp neighbour : display the neighbour devices 
!
show cdp neighbour details 
!
show cdp entry <device_name> : Display the CDP entry 
!
show lldp neighbour 
!
show lldp neighbour details 
!
# configure Ethernet channels : 
!
interface gig0/1-4
channel-group 1 mode on 
!
show etherchannel 1 summary 
!
# Dynamic Etherchannel : 
!
# PAgP : 
!
channel-group 1 mode desirable | auto 
!
# LACP 
!
channel-group 1 mode auto | passive 
!
# Confirmation for dynamic Etherchannel 
!
show etherchannel 1 port-channel 
!
# Etherchannel Load Balancing Methods : 
!
port-channel load-balance {method}
!
test etherchannel load-balance : this command ask the switch to consider some addresses or port and answer the question : which link would you use when forwarding a message with those port/address values.
!
show etherchannel load-balance 
!
test etherchannel load-balance interface po1 mac {mac_address} 
!

-------------------------------------------------------------------------------------------------------------------------------

-> User EXEC (also called user mode ) : this is the first level of access. can only use a limited set of commands prompt: switch > 
-> Privilege EXEC (also called enable mode / mode like root ) or administrative mode prompt : Switch#

------------------------------------------------------------------------------------------------------------------------------

Some concepts : 

1. VTP mode to Transparent so that every switch uses its own local database of VLANs 
2. VTP Server allow you to create VLANs and they also synchronize with other switches in the topology 
3. interface vlan 1 : this command create a switch Virtual Interface 
4. To Disable DTP run : switchport nonegotiate 
5. Switchport access vlan 1 : this is default common so ot will not be display in show run command 
6. show cdp neighbour detail
7. no cdp run : to shut down the cdp 
8. Sending CDP packets in every 60 Seconds 
9. Sending a holdtime value of 180 seconds
10. show cdp entry * : shows all neighbouring devices 
11. show cdp entry [name of switch or router] : Name should be case sensitive 
12. show cdp traffic 
13. show lldp neighbours 
14. management traffic such as DTP, VTP, LLDP, CDP are not blocked by spanning tree 
15.   
